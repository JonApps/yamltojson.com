var global=Function("return this;")();!function(context){context["global"]=context;var modules={},old=context.$;function require(identifier){var module=modules[identifier]||window[identifier];if(!module)throw new Error("Requested module '"+identifier+"' has not been defined.");return module}function provide(name,what){return modules[name]=what}context["provide"]=provide;context["require"]=require;function aug(o,o2){for(var k in o2)k!="noConflict"&&k!="_VERSION"&&(o[k]=o2[k]);return o}function boosh(s,r,els){if(typeof s=="string"||s.nodeName||s.length&&"item"in s||s==window){els=ender._select(s,r);els.selector=s}else els=isFinite(s.length)?s:[s];return aug(els,boosh)}function ender(s,r){return boosh(s,r)}aug(ender,{_VERSION:"0.3.6",fn:boosh,ender:function(o,chain){aug(chain?boosh:ender,o)},_select:function(s,r){return(r||document).querySelectorAll(s)}});aug(boosh,{forEach:function(fn,scope,i){for(i=0,l=this.length;i<l;++i)i in this&&fn.call(scope||this[i],this[i],i,this);return this},$:ender});ender.noConflict=function(){context.$=old;return this};if(typeof module!=="undefined"&&module.exports)module.exports=ender;context["ender"]=context["$"]=context["ender"]||ender}(this);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");(function(){if(typeof module==="object"&&module.exports){module.exports=LRUCache}else{this.LRUCache=LRUCache}function hOP(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)}function naiveLength(){return 1}function LRUCache(options){if(!(this instanceof LRUCache)){return new LRUCache(options)}var max;if(typeof options==="number"){max=options;options={max:max}}if(!options)options={};max=options.max;var lengthCalculator=options.length||naiveLength;if(typeof lengthCalculator!=="function"){lengthCalculator=naiveLength}if(!max||!(typeof max==="number")||max<=0){max=Infinity}var allowStale=options.stale||false;var maxAge=options.maxAge||null;var dispose=options.dispose;var cache=Object.create(null),lruList=Object.create(null),mru=0,lru=0,length=0,itemCount=0;Object.defineProperty(this,"max",{set:function(mL){if(!mL||!(typeof mL==="number")||mL<=0)mL=Infinity;max=mL;if(length>max)trim()},get:function(){return max},enumerable:true});Object.defineProperty(this,"lengthCalculator",{set:function(lC){if(typeof lC!=="function"){lengthCalculator=naiveLength;length=itemCount;for(var key in cache){cache[key].length=1}}else{lengthCalculator=lC;length=0;for(var key in cache){cache[key].length=lengthCalculator(cache[key].value);length+=cache[key].length}}if(length>max)trim()},get:function(){return lengthCalculator},enumerable:true});Object.defineProperty(this,"length",{get:function(){return length},enumerable:true});Object.defineProperty(this,"itemCount",{get:function(){return itemCount},enumerable:true});this.forEach=function(fn,thisp){thisp=thisp||this;var i=0;for(var k=mru-1;k>=0&&i<itemCount;k--)if(lruList[k]){i++;var hit=lruList[k];fn.call(thisp,hit.value,hit.key,this)}};this.keys=function(){var keys=new Array(itemCount);var i=0;for(var k=mru-1;k>=0&&i<itemCount;k--)if(lruList[k]){var hit=lruList[k];keys[i++]=hit.key}return keys};this.values=function(){var values=new Array(itemCount);var i=0;for(var k=mru-1;k>=0&&i<itemCount;k--)if(lruList[k]){var hit=lruList[k];values[i++]=hit.value}return values};this.reset=function(){if(dispose){for(var k in cache){dispose(k,cache[k].value)}}cache={};lruList={};lru=0;mru=0;length=0;itemCount=0};this.dump=function(){return cache};this.dumpLru=function(){return lruList};this.set=function(key,value){if(hOP(cache,key)){if(dispose)dispose(key,cache[key].value);if(maxAge)cache[key].now=Date.now();cache[key].value=value;this.get(key);return true}var len=lengthCalculator(value);var age=maxAge?Date.now():0;var hit=new Entry(key,value,mru++,len,age);if(hit.length>max){if(dispose)dispose(key,value);return false}length+=hit.length;lruList[hit.lu]=cache[key]=hit;itemCount++;if(length>max)trim();return true};this.has=function(key){if(!hOP(cache,key))return false;var hit=cache[key];if(maxAge&&Date.now()-hit.now>maxAge){return false}return true};this.get=function(key){return get(key,true)};this.peek=function(key){return get(key,false)};function get(key,doUse){var hit=cache[key];if(hit){if(maxAge&&Date.now()-hit.now>maxAge){del(hit);if(!allowStale)hit=undefined}else{if(doUse)use(hit)}if(hit)hit=hit.value}return hit}function use(hit){shiftLU(hit);hit.lu=mru++;lruList[hit.lu]=hit}this.del=function(key){del(cache[key])};function trim(){while(lru<mru&&length>max)del(lruList[lru])}function shiftLU(hit){delete lruList[hit.lu];while(lru<mru&&!lruList[lru])lru++}function del(hit){if(hit){if(dispose)dispose(hit.key,hit.value);length-=hit.length;itemCount--;delete cache[hit.key];shiftLU(hit)}}}function Entry(key,value,mru,len,age){this.key=key;this.value=value;this.lu=mru;this.length=len;this.now=age}})();provide("lru-cache",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");module.exports=sigmund;function sigmund(subject,maxSessions){maxSessions=maxSessions||10;var notes=[];var analysis="";var RE=RegExp;function psychoAnalyze(subject,session){if(session>maxSessions)return;if(typeof subject==="function"||typeof subject==="undefined"){return}if(typeof subject!=="object"||!subject||subject instanceof RE){analysis+=subject;return}if(notes.indexOf(subject)!==-1||session===maxSessions)return;notes.push(subject);analysis+="{";Object.keys(subject).forEach(function(issue,_,__){if(issue.charAt(0)==="_")return;var to=typeof subject[issue];if(to==="function"||to==="undefined")return;analysis+=issue;psychoAnalyze(subject[issue],session+1)})}psychoAnalyze(subject,0);return analysis}provide("sigmund",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=_}exports._=_}else{root._=_}_.VERSION="1.5.1";var each=_.each=_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return}}else{for(var key in obj){if(_.has(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker)return}}}};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))});return results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}each(obj,function(value,index,list){if(!initial){memo=value;initial=true}else{memo=iterator.call(context,memo,value,index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var length=obj.length;if(length!==+length){var keys=_.keys(obj);length=keys.length}each(obj,function(value,index,list){index=keys?keys[--length]:--length;if(!initial){memo=obj[index];initial=true}else{memo=iterator.call(context,memo,obj[index],index,list)}});if(!initial)throw new TypeError(reduceError);return memo};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results.push(value)});return results};_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list)},context)};_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=true;if(obj==null)return result;if(nativeEvery&&obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker});return!!result};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker});return!!result};_.contains=_.include=function(obj,target){if(obj==null)return false;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;return any(obj,function(value){return value===target})};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})};_.where=function(obj,attrs,first){if(_.isEmpty(attrs))return first?void 0:[];return _[first?"find":"filter"](obj,function(value){for(var key in attrs){if(attrs[key]!==value[key])return false}return true})};_.findWhere=function(obj,attrs){return _.where(obj,attrs,true)};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.max.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity,value:-Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed>result.computed&&(result={value:value,computed:computed})});return result.value};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535){return Math.min.apply(Math,obj)}if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity,value:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<result.computed&&(result={value:value,computed:computed})});return result.value};_.shuffle=function(obj){var rand;var index=0;var shuffled=[];each(obj,function(value){rand=_.random(index++);shuffled[index-1]=shuffled[rand];shuffled[rand]=value});return shuffled};var lookupIterator=function(value){return _.isFunction(value)?value:function(obj){return obj[value]}};_.sortBy=function(obj,value,context){var iterator=lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index<right.index?-1:1}),"value")};var group=function(obj,value,context,behavior){var result={};var iterator=lookupIterator(value==null?_.identity:value);each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)});return result};_.groupBy=function(obj,value,context){return group(obj,value,context,function(result,key,value){(_.has(result,key)?result[key]:result[key]=[]).push(value)})};_.countBy=function(obj,value,context){return group(obj,value,context,function(result,key){if(!_.has(result,key))result[key]=0;result[key]++})};_.sortedIndex=function(array,obj,iterator,context){iterator=iterator==null?_.identity:lookupIterator(iterator);var value=iterator.call(context,obj);var low=0,high=array.length;while(low<high){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length};_.first=_.head=_.take=function(array,n,guard){if(array==null)return void 0;return n!=null&&!guard?slice.call(array,0,n):array[0]};_.initial=function(array,n,guard){return slice.call(array,0,array.length-(n==null||guard?1:n))};_.last=function(array,n,guard){if(array==null)return void 0;if(n!=null&&!guard){return slice.call(array,Math.max(array.length-n,0))}else{return array[array.length-1]}};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,_.identity)};var flatten=function(input,shallow,output){if(shallow&&_.every(input,_.isArray)){return concat.apply(output,input)}each(input,function(value){if(_.isArray(value)||_.isArguments(value)){shallow?push.apply(output,value):flatten(value,shallow,output)}else{output.push(value)}});return output};_.flatten=function(array,shallow){return flatten(array,shallow,[])};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted)){context=iterator;iterator=isSorted;isSorted=false}var initial=iterator?_.map(array,iterator,context):array;var results=[];var seen=[];each(initial,function(value,index){if(isSorted?!index||seen[seen.length-1]!==value:!_.contains(seen,value)){seen.push(value);results.push(array[index])}});return results};_.union=function(){return _.uniq(_.flatten(arguments,true))};_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,item)>=0})})};_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){var length=_.max(_.pluck(arguments,"length").concat(0));var results=new Array(length);for(var i=0;i<length;i++){results[i]=_.pluck(arguments,""+i)}return results};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,l=list.length;i<l;i++){if(values){result[list[i]]=values[i]}else{result[list[i][0]]=list[i][1]}}return result};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,l=array.length;if(isSorted){if(typeof isSorted=="number"){i=isSorted<0?Math.max(0,l+isSorted):isSorted}else{i=_.sortedIndex(array,item);return array[i]===item?i:-1}}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;i<l;i++)if(array[i]===item)return i;return-1};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var hasIndex=from!=null;if(nativeLastIndexOf&&array.lastIndexOf===nativeLastIndexOf){return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item)}var i=hasIndex?from:array.length;while(i--)if(array[i]===item)return i;return-1};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=arguments[2]||1;var len=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(len);while(idx<len){range[idx++]=start;start+=step}return range};var ctor=function(){};_.bind=function(func,context){var args,bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;args=slice.call(arguments,2);return bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self}};_.partial=function(func){var args=slice.call(arguments,1);return function(){return func.apply(this,args.concat(slice.call(arguments)))}};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length===0)throw new Error("bindAll must be passed function names");each(funcs,function(f){obj[f]=_.bind(obj[f],obj)});return obj};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}};_.delay=function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))};_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;options||(options={});var later=function(){previous=options.leading===false?0:new Date;timeout=null;result=func.apply(context,args)};return function(){var now=new Date;if(!previous&&options.leading===false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout&&options.trailing!==false){timeout=setTimeout(later,remaining)}return result}};_.debounce=function(func,wait,immediate){var result;var timeout=null;return function(){var context=this,args=arguments;var later=function(){timeout=null;if(!immediate)result=func.apply(context,args)};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args);return result}};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;memo=func.apply(this,arguments);func=null;return memo}};_.wrap=function(func,wrapper){return function(){var args=[func];push.apply(args,arguments);return wrapper.apply(this,args)}};_.compose=function(){var funcs=arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--){args=[funcs[i].apply(this,args)]}return args[0]}};_.after=function(times,func){return function(){if(--times<1){return func.apply(this,arguments)}}};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);return keys};_.values=function(obj){var values=[];for(var key in obj)if(_.has(obj,key))values.push(obj[key]);return values};_.pairs=function(obj){var pairs=[];for(var key in obj)if(_.has(obj,key))pairs.push([key,obj[key]]);return pairs};_.invert=function(obj){var result={};for(var key in obj)if(_.has(obj,key))result[obj[key]]=key;return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj){if(_.isFunction(obj[key]))names.push(key)}return names.sort()};_.extend=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){obj[prop]=source[prop]}}});return obj};_.pick=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));each(keys,function(key){if(key in obj)copy[key]=obj[key]});return copy};_.omit=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj){if(!_.contains(keys,key))copy[key]=obj[key]}return copy};_.defaults=function(obj){each(slice.call(arguments,1),function(source){if(source){for(var prop in source){if(obj[prop]===void 0)obj[prop]=source[prop]}}});return obj};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return false;switch(className){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return false;var length=aStack.length;while(length--){if(aStack[length]==a)return bStack[length]==b}var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor)){return false}aStack.push(a);bStack.push(b);var size=0,result=true;if(className=="[object Array]"){size=a.length;result=size==b.length;if(result){while(size--){if(!(result=eq(a[size],b[size],aStack,bStack)))break}}}else{for(var key in a){if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break}}if(result){for(key in b){if(_.has(b,key)&&!size--)break}result=!size}}aStack.pop();bStack.pop();return result};_.isEqual=function(a,b){return eq(a,b,[],[])};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"};_.isObject=function(obj){return obj===Object(obj)};each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+name]=function(obj){return toString.call(obj)=="[object "+name+"]"}});if(!_.isArguments(arguments)){_.isArguments=function(obj){return!!(obj&&_.has(obj,"callee"))}}if(typeof/./!=="function"){_.isFunction=function(obj){return typeof obj==="function"}}_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=="[object Boolean]"};_.isNull=function(obj){return obj===null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.times=function(n,iterator,context){var accum=Array(Math.max(0,n));for(var i=0;i<n;i++)accum[i]=iterator.call(context,i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};var entityMap={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){if(string==null)return"";return(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}});_.result=function(object,property){if(object==null)return void 0;var value=object[property];return _.isFunction(value)?value.call(object):value};_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]});if(escape){source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'"}if(interpolate){source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'"}if(evaluate){source+="';\n"+evaluate+"\n__p+='"}index=offset+match.length;return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e){e.source=source;throw e}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};template.source="function("+(settings.variable||"obj")+"){\n"+source+"}";return template};_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_);each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name=="shift"||name=="splice")&&obj.length===0)delete obj[0];return result.call(this,obj)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}});_.extend(_.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);provide("underscore",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");!function(root,String){"use strict";var nativeTrim=String.prototype.trim;var nativeTrimRight=String.prototype.trimRight;var nativeTrimLeft=String.prototype.trimLeft;var parseNumber=function(source){return source*1||0};var strRepeat=function(str,qty){if(qty<1)return"";var result="";while(qty>0){if(qty&1)result+=str;qty>>=1,str+=str}return result};var slice=[].slice;var defaultToWhiteSpace=function(characters){if(characters==null)return"\\s";else if(characters.source)return characters.source;else return"["+_s.escapeRegExp(characters)+"]"};function boolMatch(s,matchers){var i,matcher,down=s.toLowerCase();matchers=[].concat(matchers);for(i=0;i<matchers.length;i+=1){matcher=matchers[i];if(!matcher)continue;if(matcher.test&&matcher.test(s))return true;if(matcher.toLowerCase()===down)return true}}var escapeChars={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};var reversedEscapeChars={};for(var key in escapeChars)reversedEscapeChars[escapeChars[key]]=key;reversedEscapeChars["'"]="#39";var sprintf=function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}var str_repeat=strRepeat;var str_format=function(){if(!str_format.cache.hasOwnProperty(arguments[0])){str_format.cache[arguments[0]]=str_format.parse(arguments[0])}return str_format.format.call(null,str_format.cache[arguments[0]],arguments)};str_format.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type="",arg,output=[],i,k,match,pad,pad_character,pad_length;for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==="string"){output.push(parse_tree[i])}else if(node_type==="array"){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw new Error(sprintf('[_.sprintf] property "%s" does not exist',match[2][k]))}arg=arg[match[2][k]]}}else if(match[1]){arg=argv[match[1]]}else{arg=argv[cursor++]}if(/[^s]/.test(match[8])&&get_type(arg)!="number"){throw new Error(sprintf("[_.sprintf] expecting number but found %s",get_type(arg)))}switch(match[8]){case"b":arg=arg.toString(2);break;case"c":arg=String.fromCharCode(arg);break;case"d":arg=parseInt(arg,10);break;case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case"o":arg=arg.toString(8);break;case"s":arg=(arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg;break;case"u":arg=Math.abs(arg);break;case"x":arg=arg.toString(16);break;case"X":arg=arg.toString(16).toUpperCase();break}arg=/[def]/.test(match[8])&&match[3]&&arg>=0?"+"+arg:arg;pad_character=match[4]?match[4]=="0"?"0":match[4].charAt(1):" ";pad_length=match[6]-String(arg).length;pad=match[6]?str_repeat(pad_character,pad_length):"";output.push(match[5]?arg+pad:pad+arg)}}return output.join("")};str_format.cache={};str_format.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=/^[^\x25]+/.exec(_fmt))!==null){parse_tree.push(match[0])}else if((match=/^\x25{2}/.exec(_fmt))!==null){parse_tree.push("%")}else if((match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);while((replacement_field=replacement_field.substring(field_match[0].length))!==""){if((field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1])}else if((field_match=/^\[(\d+)\]/.exec(replacement_field))!==null){field_list.push(field_match[1])}else{throw new Error("[_.sprintf] huh?")}}}else{throw new Error("[_.sprintf] huh?")}match[2]=field_list}else{arg_names|=2}if(arg_names===3){throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported")}parse_tree.push(match)}else{throw new Error("[_.sprintf] huh?")}_fmt=_fmt.substring(match[0].length)}return parse_tree};return str_format}();var _s={VERSION:"2.3.0",isBlank:function(str){if(str==null)str="";return/^\s*$/.test(str)},stripTags:function(str){if(str==null)return"";return String(str).replace(/<\/?[^>]+>/g,"")},capitalize:function(str){str=str==null?"":String(str);return str.charAt(0).toUpperCase()+str.slice(1)},chop:function(str,step){if(str==null)return[];str=String(str);step=~~step;return step>0?str.match(new RegExp(".{1,"+step+"}","g")):[str]},clean:function(str){return _s.strip(str).replace(/\s+/g," ")},count:function(str,substr){if(str==null||substr==null)return 0;str=String(str);substr=String(substr);var count=0,pos=0,length=substr.length;while(true){pos=str.indexOf(substr,pos);if(pos===-1)break;count++;pos+=length}return count},chars:function(str){if(str==null)return[];return String(str).split("")},swapCase:function(str){if(str==null)return"";return String(str).replace(/\S/g,function(c){return c===c.toUpperCase()?c.toLowerCase():c.toUpperCase()})},escapeHTML:function(str){if(str==null)return"";return String(str).replace(/[&<>"']/g,function(m){return"&"+reversedEscapeChars[m]+";"})},unescapeHTML:function(str){if(str==null)return"";return String(str).replace(/\&([^;]+);/g,function(entity,entityCode){var match;if(entityCode in escapeChars){return escapeChars[entityCode]}else if(match=entityCode.match(/^#x([\da-fA-F]+)$/)){return String.fromCharCode(parseInt(match[1],16))}else if(match=entityCode.match(/^#(\d+)$/)){return String.fromCharCode(~~match[1])}else{return entity}})},escapeRegExp:function(str){if(str==null)return"";return String(str).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(str,i,howmany,substr){var arr=_s.chars(str);
arr.splice(~~i,~~howmany,substr);return arr.join("")},insert:function(str,i,substr){return _s.splice(str,i,0,substr)},include:function(str,needle){if(needle==="")return true;if(str==null)return false;return String(str).indexOf(needle)!==-1},join:function(){var args=slice.call(arguments),separator=args.shift();if(separator==null)separator="";return args.join(separator)},lines:function(str){if(str==null)return[];return String(str).split("\n")},reverse:function(str){return _s.chars(str).reverse().join("")},startsWith:function(str,starts){if(starts==="")return true;if(str==null||starts==null)return false;str=String(str);starts=String(starts);return str.length>=starts.length&&str.slice(0,starts.length)===starts},endsWith:function(str,ends){if(ends==="")return true;if(str==null||ends==null)return false;str=String(str);ends=String(ends);return str.length>=ends.length&&str.slice(str.length-ends.length)===ends},succ:function(str){if(str==null)return"";str=String(str);return str.slice(0,-1)+String.fromCharCode(str.charCodeAt(str.length-1)+1)},titleize:function(str){if(str==null)return"";str=String(str).toLowerCase();return str.replace(/(?:^|\s|-)\S/g,function(c){return c.toUpperCase()})},camelize:function(str){return _s.trim(str).replace(/[-_\s]+(.)?/g,function(match,c){return c?c.toUpperCase():""})},underscored:function(str){return _s.trim(str).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(str){return _s.trim(str).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(str){return _s.titleize(String(str).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(str){return _s.capitalize(_s.underscored(str).replace(/_id$/,"").replace(/_/g," "))},trim:function(str,characters){if(str==null)return"";if(!characters&&nativeTrim)return nativeTrim.call(str);characters=defaultToWhiteSpace(characters);return String(str).replace(new RegExp("^"+characters+"+|"+characters+"+$","g"),"")},ltrim:function(str,characters){if(str==null)return"";if(!characters&&nativeTrimLeft)return nativeTrimLeft.call(str);characters=defaultToWhiteSpace(characters);return String(str).replace(new RegExp("^"+characters+"+"),"")},rtrim:function(str,characters){if(str==null)return"";if(!characters&&nativeTrimRight)return nativeTrimRight.call(str);characters=defaultToWhiteSpace(characters);return String(str).replace(new RegExp(characters+"+$"),"")},truncate:function(str,length,truncateStr){if(str==null)return"";str=String(str);truncateStr=truncateStr||"...";length=~~length;return str.length>length?str.slice(0,length)+truncateStr:str},prune:function(str,length,pruneStr){if(str==null)return"";str=String(str);length=~~length;pruneStr=pruneStr!=null?String(pruneStr):"...";if(str.length<=length)return str;var tmpl=function(c){return c.toUpperCase()!==c.toLowerCase()?"A":" "},template=str.slice(0,length+1).replace(/.(?=\W*\w*$)/g,tmpl);if(template.slice(template.length-2).match(/\w\w/))template=template.replace(/\s*\S+$/,"");else template=_s.rtrim(template.slice(0,template.length-1));return(template+pruneStr).length>str.length?str:str.slice(0,template.length)+pruneStr},words:function(str,delimiter){if(_s.isBlank(str))return[];return _s.trim(str,delimiter).split(delimiter||/\s+/)},pad:function(str,length,padStr,type){str=str==null?"":String(str);length=~~length;var padlen=0;if(!padStr)padStr=" ";else if(padStr.length>1)padStr=padStr.charAt(0);switch(type){case"right":padlen=length-str.length;return str+strRepeat(padStr,padlen);case"both":padlen=length-str.length;return strRepeat(padStr,Math.ceil(padlen/2))+str+strRepeat(padStr,Math.floor(padlen/2));default:padlen=length-str.length;return strRepeat(padStr,padlen)+str}},lpad:function(str,length,padStr){return _s.pad(str,length,padStr)},rpad:function(str,length,padStr){return _s.pad(str,length,padStr,"right")},lrpad:function(str,length,padStr){return _s.pad(str,length,padStr,"both")},sprintf:sprintf,vsprintf:function(fmt,argv){argv.unshift(fmt);return sprintf.apply(null,argv)},toNumber:function(str,decimals){if(!str)return 0;str=_s.trim(str);if(!str.match(/^-?\d+(?:\.\d+)?$/))return NaN;return parseNumber(parseNumber(str).toFixed(~~decimals))},numberFormat:function(number,dec,dsep,tsep){if(isNaN(number)||number==null)return"";number=number.toFixed(~~dec);tsep=typeof tsep=="string"?tsep:",";var parts=number.split("."),fnums=parts[0],decimals=parts[1]?(dsep||".")+parts[1]:"";return fnums.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+tsep)+decimals},strRight:function(str,sep){if(str==null)return"";str=String(str);sep=sep!=null?String(sep):sep;var pos=!sep?-1:str.indexOf(sep);return~pos?str.slice(pos+sep.length,str.length):str},strRightBack:function(str,sep){if(str==null)return"";str=String(str);sep=sep!=null?String(sep):sep;var pos=!sep?-1:str.lastIndexOf(sep);return~pos?str.slice(pos+sep.length,str.length):str},strLeft:function(str,sep){if(str==null)return"";str=String(str);sep=sep!=null?String(sep):sep;var pos=!sep?-1:str.indexOf(sep);return~pos?str.slice(0,pos):str},strLeftBack:function(str,sep){if(str==null)return"";str+="";sep=sep!=null?""+sep:sep;var pos=str.lastIndexOf(sep);return~pos?str.slice(0,pos):str},toSentence:function(array,separator,lastSeparator,serial){separator=separator||", ";lastSeparator=lastSeparator||" and ";var a=array.slice(),lastMember=a.pop();if(array.length>2&&serial)lastSeparator=_s.rtrim(separator)+lastSeparator;return a.length?a.join(separator)+lastSeparator+lastMember:lastMember},toSentenceSerial:function(){var args=slice.call(arguments);args[3]=true;return _s.toSentence.apply(_s,args)},slugify:function(str){if(str==null)return"";var from="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",to="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",regex=new RegExp(defaultToWhiteSpace(from),"g");str=String(str).toLowerCase().replace(regex,function(c){var index=from.indexOf(c);return to.charAt(index)||"-"});return _s.dasherize(str.replace(/[^\w\s-]/g,""))},surround:function(str,wrapper){return[wrapper,str,wrapper].join("")},quote:function(str,quoteChar){return _s.surround(str,quoteChar||'"')},unquote:function(str,quoteChar){quoteChar=quoteChar||'"';if(str[0]===quoteChar&&str[str.length-1]===quoteChar)return str.slice(1,str.length-1);else return str},exports:function(){var result={};for(var prop in this){if(!this.hasOwnProperty(prop)||prop.match(/^(?:include|contains|reverse)$/))continue;result[prop]=this[prop]}return result},repeat:function(str,qty,separator){if(str==null)return"";qty=~~qty;if(separator==null)return strRepeat(String(str),qty);for(var repeat=[];qty>0;repeat[--qty]=str){}return repeat.join(separator)},naturalCmp:function(str1,str2){if(str1==str2)return 0;if(!str1)return-1;if(!str2)return 1;var cmpRegex=/(\.\d+)|(\d+)|(\D+)/g,tokens1=String(str1).toLowerCase().match(cmpRegex),tokens2=String(str2).toLowerCase().match(cmpRegex),count=Math.min(tokens1.length,tokens2.length);for(var i=0;i<count;i++){var a=tokens1[i],b=tokens2[i];if(a!==b){var num1=parseInt(a,10);if(!isNaN(num1)){var num2=parseInt(b,10);if(!isNaN(num2)&&num1-num2)return num1-num2}return a<b?-1:1}}if(tokens1.length===tokens2.length)return tokens1.length-tokens2.length;return str1<str2?-1:1},levenshtein:function(str1,str2){if(str1==null&&str2==null)return 0;if(str1==null)return String(str2).length;if(str2==null)return String(str1).length;str1=String(str1);str2=String(str2);var current=[],prev,value;for(var i=0;i<=str2.length;i++)for(var j=0;j<=str1.length;j++){if(i&&j)if(str1.charAt(j-1)===str2.charAt(i-1))value=prev;else value=Math.min(current[j],current[j-1],prev)+1;else value=i+j;prev=current[j];current[j]=value}return current.pop()},toBoolean:function(str,trueValues,falseValues){if(typeof str==="number")str=""+str;if(typeof str!=="string")return!!str;str=_s.trim(str);if(boolMatch(str,trueValues||["true","1"]))return true;if(boolMatch(str,falseValues||["false","0"]))return false}};_s.strip=_s.trim;_s.lstrip=_s.ltrim;_s.rstrip=_s.rtrim;_s.center=_s.lrpad;_s.rjust=_s.lpad;_s.ljust=_s.rpad;_s.contains=_s.include;_s.q=_s.quote;_s.toBool=_s.toBoolean;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)module.exports=_s;exports._s=_s}if(typeof define==="function"&&define.amd)define("underscore.string",[],function(){return _s});root._=root._||{};root._.string=root._.str=_s}(this,String);provide("underscore.string",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");(function(require,exports,module,platform){if(module)module.exports=minimatch;else exports.minimatch=minimatch;if(!require){require=function(id){switch(id){case"sigmund":return function sigmund(obj){return JSON.stringify(obj)};case"path":return{basename:function(f){f=f.split(/[\/\\]/);var e=f.pop();if(!e)e=f.pop();return e}};case"lru-cache":return function LRUCache(){var cache={};var cnt=0;this.set=function(k,v){cnt++;if(cnt>=100)cache={};cache[k]=v};this.get=function(k){return cache[k]}}}}}minimatch.Minimatch=Minimatch;var LRU=require("lru-cache"),cache=minimatch.cache=new LRU({max:100}),GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={},sigmund=require("sigmund");var path=require("path"),qmark="[^/]",star=qmark+"*?",twoStarDot="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",twoStarNoDot="(?:(?!(?:\\/|^)\\.).)*?",reSpecials=charSet("().*{}+?[]^$\\!");function charSet(s){return s.split("").reduce(function(set,c){set[c]=true;return set},{})}var slashSplit=/\/+/;minimatch.monkeyPatch=monkeyPatch;function monkeyPatch(){var desc=Object.getOwnPropertyDescriptor(String.prototype,"match");var orig=desc.value;desc.value=function(p){if(p instanceof Minimatch)return p.match(this);return orig.call(this,p)};Object.defineProperty(String.prototype,desc)}minimatch.filter=filter;function filter(pattern,options){options=options||{};return function(p,i,list){return minimatch(p,pattern,options)}}function ext(a,b){a=a||{};b=b||{};var t={};Object.keys(b).forEach(function(k){t[k]=b[k]});Object.keys(a).forEach(function(k){t[k]=a[k]});return t}minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return minimatch;var orig=minimatch;var m=function minimatch(p,pattern,options){return orig.minimatch(p,pattern,ext(def,options))};m.Minimatch=function Minimatch(pattern,options){return new orig.Minimatch(pattern,ext(def,options))};return m};Minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return Minimatch;return minimatch.defaults(def).Minimatch};function minimatch(p,pattern,options){if(typeof pattern!=="string"){throw new TypeError("glob pattern string required")}if(!options)options={};if(!options.nocomment&&pattern.charAt(0)==="#"){return false}if(pattern.trim()==="")return p==="";return new Minimatch(pattern,options).match(p)}function Minimatch(pattern,options){if(!(this instanceof Minimatch)){return new Minimatch(pattern,options,cache)}if(typeof pattern!=="string"){throw new TypeError("glob pattern string required")}if(!options)options={};pattern=pattern.trim();if(platform==="win32"){pattern=pattern.split("\\").join("/")}var cacheKey=pattern+"\n"+sigmund(options);var cached=minimatch.cache.get(cacheKey);if(cached)return cached;minimatch.cache.set(cacheKey,this);this.options=options;this.set=[];this.pattern=pattern;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.make()}Minimatch.prototype.make=make;function make(){if(this._made)return;var pattern=this.pattern;var options=this.options;if(!options.nocomment&&pattern.charAt(0)==="#"){this.comment=true;return}if(!pattern){this.empty=true;return}this.parseNegate();var set=this.globSet=this.braceExpand();if(options.debug)console.error(this.pattern,set);set=this.globParts=set.map(function(s){return s.split(slashSplit)});if(options.debug)console.error(this.pattern,set);set=set.map(function(s,si,set){return s.map(this.parse,this)},this);if(options.debug)console.error(this.pattern,set);set=set.filter(function(s){return-1===s.indexOf(false)});if(options.debug)console.error(this.pattern,set);this.set=set}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var pattern=this.pattern,negate=false,options=this.options,negateOffset=0;if(options.nonegate)return;for(var i=0,l=pattern.length;i<l&&pattern.charAt(i)==="!";i++){negate=!negate;negateOffset++}if(negateOffset)this.pattern=pattern.substr(negateOffset);this.negate=negate}minimatch.braceExpand=function(pattern,options){return new Minimatch(pattern,options).braceExpand()};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(pattern,options){options=options||this.options;pattern=typeof pattern==="undefined"?this.pattern:pattern;if(typeof pattern==="undefined"){throw new Error("undefined pattern")}if(options.nobrace||!pattern.match(/\{.*\}/)){return[pattern]}var escaping=false;if(pattern.charAt(0)!=="{"){var prefix=null;for(var i=0,l=pattern.length;i<l;i++){var c=pattern.charAt(i);if(c==="\\"){escaping=!escaping}else if(c==="{"&&!escaping){prefix=pattern.substr(0,i);break}}if(prefix===null){return[pattern]}var tail=braceExpand(pattern.substr(i),options);return tail.map(function(t){return prefix+t})}var numset=pattern.match(/^\{(-?[0-9]+)\.\.(-?[0-9]+)\}/);if(numset){var suf=braceExpand(pattern.substr(numset[0].length),options),start=+numset[1],end=+numset[2],inc=start>end?-1:1,set=[];for(var i=start;i!=end+inc;i+=inc){for(var ii=0,ll=suf.length;ii<ll;ii++){set.push(i+suf[ii])}}return set}var i=1,depth=1,set=[],member="",sawEnd=false,escaping=false;function addMember(){set.push(member);member=""}FOR:for(i=1,l=pattern.length;i<l;i++){var c=pattern.charAt(i);if(escaping){escaping=false;member+="\\"+c}else{switch(c){case"\\":escaping=true;continue;case"{":depth++;member+="{";continue;case"}":depth--;if(depth===0){addMember();i++;break FOR}else{member+=c;continue}case",":if(depth===1){addMember()}else{member+=c}continue;default:member+=c;continue}}}if(depth!==0){return braceExpand("\\"+pattern,options)}var suf=braceExpand(pattern.substr(i),options);var addBraces=set.length===1;set=set.map(function(p){return braceExpand(p,options)});set=set.reduce(function(l,r){return l.concat(r)});if(addBraces){set=set.map(function(s){return"{"+s+"}"})}var ret=[];for(var i=0,l=set.length;i<l;i++){for(var ii=0,ll=suf.length;ii<ll;ii++){ret.push(set[i]+suf[ii])}}return ret}Minimatch.prototype.parse=parse;var SUBPARSE={};function parse(pattern,isSub){var options=this.options;if(!options.noglobstar&&pattern==="**")return GLOBSTAR;if(pattern==="")return"";var re="",hasMagic=!!options.nocase,escaping=false,patternListStack=[],plType,stateChar,inClass=false,reClassStart=-1,classStart=-1,patternStart=pattern.charAt(0)==="."?"":options.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)";function clearStateChar(){if(stateChar){switch(stateChar){case"*":re+=star;hasMagic=true;break;case"?":re+=qmark;hasMagic=true;break;default:re+="\\"+stateChar;break}stateChar=false}}for(var i=0,len=pattern.length,c;i<len&&(c=pattern.charAt(i));i++){if(options.debug){console.error("%s	%s %s %j",pattern,i,re,c)}if(escaping&&reSpecials[c]){re+="\\"+c;escaping=false;continue}SWITCH:switch(c){case"/":return false;case"\\":clearStateChar();escaping=true;continue;case"?":case"*":case"+":case"@":case"!":if(options.debug){console.error("%s	%s %s %j <-- stateChar",pattern,i,re,c)}if(inClass){if(c==="!"&&i===classStart+1)c="^";re+=c;continue}clearStateChar();stateChar=c;if(options.noext)clearStateChar();continue;case"(":if(inClass){re+="(";continue}if(!stateChar){re+="\\(";continue}plType=stateChar;patternListStack.push({type:plType,start:i-1,reStart:re.length});re+=stateChar==="!"?"(?:(?!":"(?:";stateChar=false;continue;case")":if(inClass||!patternListStack.length){re+="\\)";continue}hasMagic=true;re+=")";plType=patternListStack.pop().type;switch(plType){case"!":re+="[^/]*?)";break;case"?":case"+":case"*":re+=plType;case"@":break}continue;case"|":if(inClass||!patternListStack.length||escaping){re+="\\|";escaping=false;continue}re+="|";continue;case"[":clearStateChar();if(inClass){re+="\\"+c;continue}inClass=true;classStart=i;reClassStart=re.length;re+=c;continue;case"]":if(i===classStart+1||!inClass){re+="\\"+c;escaping=false;continue}hasMagic=true;inClass=false;re+=c;continue;default:clearStateChar();if(escaping){escaping=false}else if(reSpecials[c]&&!(c==="^"&&inClass)){re+="\\"}re+=c}}if(inClass){var cs=pattern.substr(classStart+1),sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0];hasMagic=hasMagic||sp[1]}var pl;while(pl=patternListStack.pop()){var tail=re.slice(pl.reStart+3);tail=tail.replace(/((?:\\{2})*)(\\?)\|/g,function(_,$1,$2){if(!$2){$2="\\"}return $1+$1+$2+"|"});var t=pl.type==="*"?star:pl.type==="?"?qmark:"\\"+pl.type;hasMagic=true;re=re.slice(0,pl.reStart)+t+"\\("+tail}clearStateChar();if(escaping){re+="\\\\"}var addPatternStart=false;switch(re.charAt(0)){case".":case"[":case"(":addPatternStart=true}if(re!==""&&hasMagic)re="(?=.)"+re;if(addPatternStart)re=patternStart+re;if(isSub===SUBPARSE){return[re,hasMagic]}if(!hasMagic){return globUnescape(pattern)}var flags=options.nocase?"i":"",regExp=new RegExp("^"+re+"$",flags);regExp._glob=pattern;regExp._src=re;return regExp}minimatch.makeRe=function(pattern,options){return new Minimatch(pattern,options||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var set=this.set;if(!set.length)return this.regexp=false;var options=this.options;var twoStar=options.noglobstar?star:options.dot?twoStarDot:twoStarNoDot,flags=options.nocase?"i":"";var re=set.map(function(pattern){return pattern.map(function(p){return p===GLOBSTAR?twoStar:typeof p==="string"?regExpEscape(p):p._src}).join("\\/")}).join("|");re="^(?:"+re+")$";if(this.negate)re="^(?!"+re+").*$";try{return this.regexp=new RegExp(re,flags)}catch(ex){return this.regexp=false}}minimatch.match=function(list,pattern,options){var mm=new Minimatch(pattern,options);list=list.filter(function(f){return mm.match(f)});if(options.nonull&&!list.length){list.push(pattern)}return list};Minimatch.prototype.match=match;function match(f,partial){if(this.comment)return false;if(this.empty)return f==="";if(f==="/"&&partial)return true;var options=this.options;if(platform==="win32"){f=f.split("\\").join("/")}f=f.split(slashSplit);if(options.debug){console.error(this.pattern,"split",f)}var set=this.set;for(var i=0,l=set.length;i<l;i++){var pattern=set[i];var hit=this.matchOne(f,pattern,partial);if(hit){if(options.flipNegate)return true;return!this.negate}}if(options.flipNegate)return false;return this.negate}Minimatch.prototype.matchOne=function(file,pattern,partial){var options=this.options;if(options.debug){console.error("matchOne",{"this":this,file:file,pattern:pattern})}if(options.matchBase&&pattern.length===1){file=path.basename(file.join("/")).split("/")}if(options.debug){console.error("matchOne",file.length,pattern.length)}for(var fi=0,pi=0,fl=file.length,pl=pattern.length;fi<fl&&pi<pl;fi++,pi++){if(options.debug){console.error("matchOne loop")}var p=pattern[pi],f=file[fi];if(options.debug){console.error(pattern,p,f)}if(p===false)return false;if(p===GLOBSTAR){if(options.debug)console.error("GLOBSTAR",[pattern,p,f]);var fr=fi,pr=pi+1;if(pr===pl){if(options.debug)console.error("** at the end");for(;fi<fl;fi++){if(file[fi]==="."||file[fi]===".."||!options.dot&&file[fi].charAt(0)===".")return false}return true}WHILE:while(fr<fl){var swallowee=file[fr];if(options.debug){console.error("\nglobstar while",file,fr,pattern,pr,swallowee)}if(this.matchOne(file.slice(fr),pattern.slice(pr),partial)){if(options.debug)console.error("globstar found match!",fr,fl,swallowee);return true}else{if(swallowee==="."||swallowee===".."||!options.dot&&swallowee.charAt(0)==="."){if(options.debug)console.error("dot detected!",file,fr,pattern,pr);break WHILE}if(options.debug)console.error("globstar swallow a segment, and continue");fr++}}if(partial){if(fr===fl)return true}return false}var hit;if(typeof p==="string"){if(options.nocase){hit=f.toLowerCase()===p.toLowerCase()}else{hit=f===p}if(options.debug){console.error("string match",p,f,hit)}}else{hit=f.match(p);if(options.debug){console.error("pattern match",p,f,hit)}}if(!hit)return false}if(fi===fl&&pi===pl){return true}else if(fi===fl){return partial}else if(pi===pl){var emptyFileEnd=fi===fl-1&&file[fi]==="";return emptyFileEnd}throw new Error("wtf?")};function globUnescape(s){return s.replace(/\\(.)/g,"$1")}function regExpEscape(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}})(typeof require==="function"?require:null,this,typeof module==="object"?module:null,typeof process==="object"?process.platform:"win32");provide("minimatch",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");module.exports=require("util").inherits;provide("inherits",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");module.exports.EOL="\n";module.exports.SUPPRESS="==SUPPRESS==";module.exports.OPTIONAL="?";module.exports.ZERO_OR_MORE="*";module.exports.ONE_OR_MORE="+";module.exports.PARSER="A...";module.exports.REMAINDER="...";module.exports._UNRECOGNIZED_ARGS_ATTR="_unrecognized_args";provide("argparse/lib/const",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var $$=require("argparse/lib/const");var Action=module.exports=function Action(options){options=options||{};this.optionStrings=options.optionStrings||[];this.dest=options.dest;this.nargs=options.nargs!==undefined?options.nargs:null;this.constant=options.constant!==undefined?options.constant:null;this.defaultValue=options.defaultValue;this.type=options.type!==undefined?options.type:null;this.choices=options.choices!==undefined?options.choices:null;this.required=options.required!==undefined?options.required:false;this.help=options.help!==undefined?options.help:null;this.metavar=options.metavar!==undefined?options.metavar:null;if(!(this.optionStrings instanceof Array)){throw new Error("optionStrings should be an array")}if(this.required!==undefined&&typeof this.required!=="boolean"){throw new Error("required should be a boolean")}};Action.prototype.getName=function(){if(this.optionStrings.length>0){return this.optionStrings.join("/")}else if(this.metavar!==null&&this.metavar!==$$.SUPPRESS){return this.metavar}else if(this.dest!==undefined&&this.dest!==$$.SUPPRESS){return this.dest}return null};Action.prototype.isOptional=function(){return!this.isPositional()};Action.prototype.isPositional=function(){return this.optionStrings.length===0};Action.prototype.call=function(){throw new Error(".call() not defined")};provide("argparse/lib/action",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var Action=require("argparse/lib/action");var ActionStoreConstant=module.exports=function ActionStoreConstant(options){options=options||{};options.nargs=0;if(options.constant===undefined){throw new Error("constant option is required for storeAction")}Action.call(this,options)};util.inherits(ActionStoreConstant,Action);ActionStoreConstant.prototype.call=function(parser,namespace){namespace.set(this.dest,this.constant)};provide("argparse/lib/action/store/constant",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var format=require("util").format;var ERR_CODE="ARGError";module.exports=function(argument,message){var argumentName=null;var errMessage;var err;if(argument.getName){argumentName=argument.getName()}else{argumentName=""+argument}if(!argumentName){errMessage=message}else{errMessage=format('argument "%s": %s',argumentName,message)}err=new TypeError(errMessage);err.code=ERR_CODE;return err};provide("argparse/lib/argument/error",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var ActionContainer=require("argparse/lib/action_container");var ArgumentGroup=module.exports=function ArgumentGroup(container,options){options=options||{};options.conflictHandler=options.conflictHandler||container.conflictHandler;options.prefixChars=options.prefixChars||container.prefixChars;options.argumentDefault=options.argumentDefault||container.argumentDefault;ActionContainer.call(this,options);this.title=options.title;this._groupActions=[];this._container=container;this._registries=container._registries;this._actions=container._actions;this._optionStringActions=container._optionStringActions;this._defaults=container._defaults;this._hasNegativeNumberOptionals=container._hasNegativeNumberOptionals;this._mutuallyExclusiveGroups=container._mutuallyExclusiveGroups};util.inherits(ArgumentGroup,ActionContainer);ArgumentGroup.prototype._addAction=function(action){action=ActionContainer.prototype._addAction.call(this,action);this._groupActions.push(action);return action};ArgumentGroup.prototype._removeAction=function(action){ActionContainer.prototype._removeAction.call(this,action);var actionIndex=this._groupActions.indexOf(action);if(actionIndex>=0){this._groupActions.splice(actionIndex,1)}};provide("argparse/lib/argument/group",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var Action=require("argparse/lib/action");var $$=require("argparse/lib/const");var ActionHelp=module.exports=function ActionHelp(options){options=options||{};if(options.defaultValue!==null){options.defaultValue=options.defaultValue}else{options.defaultValue=$$.SUPPRESS}options.dest=options.dest!==null?options.dest:$$.SUPPRESS;options.nargs=0;Action.call(this,options)};util.inherits(ActionHelp,Action);ActionHelp.prototype.call=function(parser){parser.printHelp();parser.exit()};provide("argparse/lib/action/help",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var Action=require("argparse/lib/action");var $$=require("argparse/lib/const");var ActionAppend=module.exports=function ActionAppend(options){options=options||{};if(this.nargs<=0){throw new Error("nargs for append actions must be > 0; if arg "+"strings are not supplying the value to append, "+"the append const action may be more appropriate")}if(!!this.constant&&this.nargs!==$$.OPTIONAL){throw new Error("nargs must be OPTIONAL to supply const")}Action.call(this,options)};util.inherits(ActionAppend,Action);ActionAppend.prototype.call=function(parser,namespace,values){var items=[].concat(namespace[this.dest]||[]);items.push(values);namespace.set(this.dest,items)};provide("argparse/lib/action/append",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var Action=require("argparse/lib/action");var ActionAppendConstant=module.exports=function ActionAppendConstant(options){options=options||{};options.nargs=0;if(options.constant===undefined){throw new Error("constant option is required for appendAction")}Action.call(this,options)};util.inherits(ActionAppendConstant,Action);ActionAppendConstant.prototype.call=function(parser,namespace){var items=[].concat(namespace[this.dest]||[]);items.push(this.constant);namespace.set(this.dest,items)};provide("argparse/lib/action/append/constant",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var Action=require("argparse/lib/action");var ActionCount=module.exports=function ActionCount(options){options=options||{};options.nargs=0;Action.call(this,options)};util.inherits(ActionCount,Action);ActionCount.prototype.call=function(parser,namespace){namespace.set(this.dest,(namespace[this.dest]||0)+1)};provide("argparse/lib/action/count",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var Action=require("argparse/lib/action");var $$=require("argparse/lib/const");var ActionStore=module.exports=function ActionStore(options){options=options||{};if(this.nargs<=0){throw new Error("nargs for store actions must be > 0; if you "+"have nothing to store, actions such as store "+"true or store const may be more appropriate")}if(this.constant!==undefined&&this.nargs!==$$.OPTIONAL){throw new Error("nargs must be OPTIONAL to supply const")}Action.call(this,options)};util.inherits(ActionStore,Action);ActionStore.prototype.call=function(parser,namespace,values){namespace.set(this.dest,values)};provide("argparse/lib/action/store",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var ActionStoreConstant=require("argparse/lib/action/store/constant");var ActionStoreTrue=module.exports=function ActionStoreTrue(options){options=options||{};options.constant=true;options.defaultValue=options.defaultValue!==null?options.defaultValue:false;ActionStoreConstant.call(this,options)};util.inherits(ActionStoreTrue,ActionStoreConstant);provide("argparse/lib/action/store/true",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var ActionStoreConstant=require("argparse/lib/action/store/constant");var ActionStoreFalse=module.exports=function ActionStoreFalse(options){options=options||{};options.constant=false;options.defaultValue=options.defaultValue!==null?options.defaultValue:true;ActionStoreConstant.call(this,options)};util.inherits(ActionStoreFalse,ActionStoreConstant);provide("argparse/lib/action/store/false",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var Action=require("argparse/lib/action");var $$=require("argparse/lib/const");var ActionVersion=module.exports=function ActionVersion(options){options=options||{};options.defaultValue=!!options.defaultValue?options.defaultValue:$$.SUPPRESS;options.dest=options.dest||$$.SUPPRESS;options.nargs=0;this.version=options.version;Action.call(this,options)};util.inherits(ActionVersion,Action);ActionVersion.prototype.call=function(parser){var version=this.version||parser.version;var formatter=parser._getFormatter();formatter.addText(version);parser.exit(0,formatter.formatHelp())};provide("argparse/lib/action/version",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var format=require("util").format;var _=require("underscore");var Action=require("argparse/lib/action");var $$=require("argparse/lib/const");var argumentErrorHelper=require("argparse/lib/argument/error");var ChoicesPseudoAction=function(name,help){var options={optionStrings:[],dest:name,help:help};Action.call(this,options)};util.inherits(ChoicesPseudoAction,Action);var ActionSubparsers=module.exports=function ActionSubparsers(options){options=options||{};options.dest=options.dest||$$.SUPPRESS;options.nargs=$$.PARSER;this.debug=options.debug===true;this._progPrefix=options.prog;this._parserClass=options.parserClass;this._nameParserMap={};this._choicesActions=[];options.choices=this._nameParserMap;Action.call(this,options)};util.inherits(ActionSubparsers,Action);ActionSubparsers.prototype.addParser=function(name,options){var parser;var self=this;options=options||{};options.debug=this.debug===true;if(!options.prog){options.prog=this._progPrefix+" "+name}var aliases=options.aliases||[];if(!!options.help||_.isString(options.help)){var help=options.help;delete options.help;var choiceAction=new ChoicesPseudoAction(name,help);this._choicesActions.push(choiceAction)}parser=new this._parserClass(options);this._nameParserMap[name]=parser;aliases.forEach(function(alias){self._nameParserMap[alias]=parser
});return parser};ActionSubparsers.prototype._getSubactions=function(){return this._choicesActions};ActionSubparsers.prototype.call=function(parser,namespace,values){var parserName=values[0];var argStrings=values.slice(1);if(this.dest!==$$.SUPPRESS){namespace[this.dest]=parserName}if(!!this._nameParserMap[parserName]){parser=this._nameParserMap[parserName]}else{throw argumentErrorHelper(format('Unknown parser "%s" (choices: [%s]).',parserName,_.keys(this._nameParserMap).join(", ")))}parser.parseArgs(argStrings,namespace)};provide("argparse/lib/action/subparsers",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var ArgumentGroup=require("argparse/lib/argument/group");var MutuallyExclusiveGroup=module.exports=function MutuallyExclusiveGroup(container,options){var required;options=options||{};required=options.required||false;ArgumentGroup.call(this,container);this.required=required};util.inherits(MutuallyExclusiveGroup,ArgumentGroup);MutuallyExclusiveGroup.prototype._addAction=function(action){var msg;if(action.required){msg="mutually exclusive arguments must be optional";throw new Error(msg)}action=this._container._addAction(action);this._groupActions.push(action);return action};MutuallyExclusiveGroup.prototype._removeAction=function(action){this._container._removeAction(action);this._groupActions.remove(action)};provide("argparse/lib/argument/exclusive",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var format=require("util").format;var _=require("underscore");_.str=require("underscore.string");var $$=require("argparse/lib/const");var ActionHelp=require("argparse/lib/action/help");var ActionAppend=require("argparse/lib/action/append");var ActionAppendConstant=require("argparse/lib/action/append/constant");var ActionCount=require("argparse/lib/action/count");var ActionStore=require("argparse/lib/action/store");var ActionStoreConstant=require("argparse/lib/action/store/constant");var ActionStoreTrue=require("argparse/lib/action/store/true");var ActionStoreFalse=require("argparse/lib/action/store/false");var ActionVersion=require("argparse/lib/action/version");var ActionSubparsers=require("argparse/lib/action/subparsers");var argumentErrorHelper=require("argparse/lib/argument/error");var ActionContainer=module.exports=function ActionContainer(options){options=options||{};this.description=options.description;this.argumentDefault=options.argumentDefault;this.prefixChars=options.prefixChars||"";this.conflictHandler=options.conflictHandler;this._registries={};this.register("action",null,ActionStore);this.register("action","store",ActionStore);this.register("action","storeConst",ActionStoreConstant);this.register("action","storeTrue",ActionStoreTrue);this.register("action","storeFalse",ActionStoreFalse);this.register("action","append",ActionAppend);this.register("action","appendConst",ActionAppendConstant);this.register("action","count",ActionCount);this.register("action","help",ActionHelp);this.register("action","version",ActionVersion);this.register("action","parsers",ActionSubparsers);this._getHandler();this._actions=[];this._optionStringActions={};this._actionGroups=[];this._mutuallyExclusiveGroups=[];this._defaults={};this._regexpNegativeNumber=new RegExp("^[-]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$");this._hasNegativeNumberOptionals=[]};var ArgumentGroup=require("argparse/lib/argument/group");var MutuallyExclusiveGroup=require("argparse/lib/argument/exclusive");ActionContainer.prototype.register=function(registryName,value,object){this._registries[registryName]=this._registries[registryName]||{};this._registries[registryName][value]=object};ActionContainer.prototype._registryGet=function(registryName,value,defaultValue){if(3>arguments.length){defaultValue=null}return this._registries[registryName][value]||defaultValue};ActionContainer.prototype.setDefaults=function(options){options=options||{};for(var property in options){this._defaults[property]=options[property]}this._actions.forEach(function(action){if(action.dest in options){action.defaultValue=options[action.dest]}})};ActionContainer.prototype.getDefault=function(dest){var result=_.has(this._defaults,dest)?this._defaults[dest]:null;this._actions.forEach(function(action){if(action.dest===dest&&_.has(action,"defaultValue")){result=action.defaultValue}});return result};ActionContainer.prototype.addArgument=function(args,options){args=args;options=options||{};if(!_.isArray(args)){throw new TypeError("addArgument first argument should be an array")}if(!_.isObject(options)||_.isArray(options)){throw new TypeError("addArgument second argument should be a hash")}if(!args||args.length===1&&this.prefixChars.indexOf(args[0][0])<0){if(args&&!!options.dest){throw new Error("dest supplied twice for positional argument")}options=this._getPositional(args,options)}else{options=this._getOptional(args,options)}if(_.isUndefined(options.defaultValue)){var dest=options.dest;if(_.has(this._defaults,dest)){options.defaultValue=this._defaults[dest]}else if(!_.isUndefined(this.argumentDefault)){options.defaultValue=this.argumentDefault}}var ActionClass=this._popActionClass(options);if(!_.isFunction(ActionClass)){throw new Error(format('Unknown action "%s".',ActionClass))}var action=new ActionClass(options);var typeFunction=this._registryGet("type",action.type,action.type);if(!_.isFunction(typeFunction)){throw new Error(format('"%s" is not callable',typeFunction))}return this._addAction(action)};ActionContainer.prototype.addArgumentGroup=function(options){var group=new ArgumentGroup(this,options);this._actionGroups.push(group);return group};ActionContainer.prototype.addMutuallyExclusiveGroup=function(options){var group=new MutuallyExclusiveGroup(this,options);this._mutuallyExclusiveGroups.push(group);return group};ActionContainer.prototype._addAction=function(action){var self=this;this._checkConflict(action);this._actions.push(action);action.container=this;action.optionStrings.forEach(function(optionString){self._optionStringActions[optionString]=action});action.optionStrings.forEach(function(optionString){if(optionString.match(self._regexpNegativeNumber)){if(!_.any(self._hasNegativeNumberOptionals)){self._hasNegativeNumberOptionals.push(true)}}});return action};ActionContainer.prototype._removeAction=function(action){var actionIndex=this._actions.indexOf(action);if(actionIndex>=0){this._actions.splice(actionIndex,1)}};ActionContainer.prototype._addContainerActions=function(container){var titleGroupMap={};this._actionGroups.forEach(function(group){if(titleGroupMap[group.title]){throw new Error(format('Cannot merge actions - two groups are named "%s".',group.title))}titleGroupMap[group.title]=group});var groupMap={};function actionHash(action){return action.getName()}container._actionGroups.forEach(function(group){if(!titleGroupMap[group.title]){titleGroupMap[group.title]=this.addArgumentGroup({title:group.title,description:group.description})}group._groupActions.forEach(function(action){groupMap[actionHash(action)]=titleGroupMap[group.title]})},this);var mutexGroup;container._mutuallyExclusiveGroups.forEach(function(group){mutexGroup=this.addMutuallyExclusiveGroup({required:group.required});group._groupActions.forEach(function(action){groupMap[actionHash(action)]=mutexGroup})},this);container._actions.forEach(function(action){var key=actionHash(action);if(!!groupMap[key]){groupMap[key]._addAction(action)}else{this._addAction(action)}})};ActionContainer.prototype._getPositional=function(dest,options){if(_.isArray(dest)){dest=_.first(dest)}if(options.required){throw new Error('"required" is an invalid argument for positionals.')}if(options.nargs!==$$.OPTIONAL&&options.nargs!==$$.ZERO_OR_MORE){options.required=true}if(options.nargs===$$.ZERO_OR_MORE&&options.defaultValue===undefined){options.required=true}options.dest=dest;options.optionStrings=[];return options};ActionContainer.prototype._getOptional=function(args,options){var prefixChars=this.prefixChars;var optionStrings=[];var optionStringsLong=[];args.forEach(function(optionString){if(prefixChars.indexOf(optionString[0])<0){throw new Error(format('Invalid option string "%s": must start with a "%s".',optionString,prefixChars))}optionStrings.push(optionString);if(optionString.length>1&&prefixChars.indexOf(optionString[1])>=0){optionStringsLong.push(optionString)}});var dest=options.dest||null;delete options.dest;if(!dest){var optionStringDest=optionStringsLong.length?optionStringsLong[0]:optionStrings[0];dest=_.str.strip(optionStringDest,this.prefixChars);if(dest.length===0){throw new Error(format('dest= is required for options like "%s"',optionStrings.join(", ")))}dest=dest.replace(/-/g,"_")}options.dest=dest;options.optionStrings=optionStrings;return options};ActionContainer.prototype._popActionClass=function(options,defaultValue){defaultValue=defaultValue||null;var action=options.action||defaultValue;delete options.action;var actionClass=this._registryGet("action",action,action);return actionClass};ActionContainer.prototype._getHandler=function(){var handlerString=this.conflictHandler;var handlerFuncName="_handleConflict"+_.str.capitalize(handlerString);var func=this[handlerFuncName];if(typeof func==="undefined"){var msg="invalid conflict resolution value: "+handlerString;throw new Error(msg)}else{return func}};ActionContainer.prototype._checkConflict=function(action){var optionStringActions=this._optionStringActions;var conflictOptionals=[];action.optionStrings.forEach(function(optionString){var conflOptional=optionStringActions[optionString];if(typeof conflOptional!=="undefined"){conflictOptionals.push([optionString,conflOptional])}});if(conflictOptionals.length>0){var conflictHandler=this._getHandler();conflictHandler.call(this,action,conflictOptionals)}};ActionContainer.prototype._handleConflictError=function(action,conflOptionals){var conflicts=_.map(conflOptionals,function(pair){return pair[0]});conflicts=conflicts.join(", ");throw argumentErrorHelper(action,format("Conflicting option string(s): %s",conflicts))};ActionContainer.prototype._handleConflictResolve=function(action,conflOptionals){var self=this;conflOptionals.forEach(function(pair){var optionString=pair[0];var conflictingAction=pair[1];var i=conflictingAction.optionStrings.indexOf(optionString);if(i>=0){conflictingAction.optionStrings.splice(i,1)}delete self._optionStringActions[optionString];if(conflictingAction.optionStrings.length===0){conflictingAction.container._removeAction(conflictingAction)}})};provide("argparse/lib/action_container",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var _=require("underscore");_.str=require("underscore.string");var $$=require("argparse/lib/const");function Section(parent,heading){this._parent=parent;this._heading=heading;this._items=[]}Section.prototype.addItem=function(callback){this._items.push(callback)};Section.prototype.formatHelp=function(formatter){var itemHelp,heading;if(!!this._parent){formatter._indent()}itemHelp=this._items.map(function(item){var obj,func,args;obj=formatter;func=item[0];args=item[1];return func.apply(obj,args)});itemHelp=formatter._joinParts(itemHelp);if(!!this._parent){formatter._dedent()}if(!itemHelp){return""}heading="";if(!!this._heading&&this._heading!==$$.SUPPRESS){var currentIndent=formatter.currentIndent;heading=_.str.repeat(" ",currentIndent)+this._heading+":"+$$.EOL}return formatter._joinParts([$$.EOL,heading,itemHelp,$$.EOL])};var HelpFormatter=module.exports=function HelpFormatter(options){options=options||{};this._prog=options.prog;this._maxHelpPosition=options.maxHelpPosition||24;this._width=options.width||(process.env.COLUMNS||80)-2;this._currentIndent=0;this._indentIncriment=options.indentIncriment||2;this._level=0;this._actionMaxLength=0;this._rootSection=new Section(null);this._currentSection=this._rootSection;this._whitespaceMatcher=new RegExp("\\s+","g");this._longBreakMatcher=new RegExp($$.EOL+$$.EOL+$$.EOL+"+","g")};HelpFormatter.prototype._indent=function(){this._currentIndent+=this._indentIncriment;this._level+=1};HelpFormatter.prototype._dedent=function(){this._currentIndent-=this._indentIncriment;this._level-=1;if(this._currentIndent<0){throw new Error("Indent decreased below 0.")}};HelpFormatter.prototype._addItem=function(func,args){this._currentSection.addItem([func,args])};HelpFormatter.prototype.startSection=function(heading){this._indent();var section=new Section(this._currentSection,heading);var func=section.formatHelp.bind(section);this._addItem(func,[this]);this._currentSection=section};HelpFormatter.prototype.endSection=function(){this._currentSection=this._currentSection._parent;this._dedent()};HelpFormatter.prototype.addText=function(text){if(!!text&&text!==$$.SUPPRESS){this._addItem(this._formatText,[text])}};HelpFormatter.prototype.addUsage=function(usage,actions,groups,prefix){if(usage!==$$.SUPPRESS){this._addItem(this._formatUsage,[usage,actions,groups,prefix])}};HelpFormatter.prototype.addArgument=function(action){if(action.help!==$$.SUPPRESS){var self=this;var invocations=[this._formatActionInvocation(action)];var invocationLength=invocations[0].length;var actionLength;if(!!action._getSubactions){this._indent();action._getSubactions().forEach(function(subaction){var invocationNew=self._formatActionInvocation(subaction);invocations.push(invocationNew);invocationLength=Math.max(invocationLength,invocationNew.length)});this._dedent()}actionLength=invocationLength+this._currentIndent;this._actionMaxLength=Math.max(this._actionMaxLength,actionLength);this._addItem(this._formatAction,[action])}};HelpFormatter.prototype.addArguments=function(actions){var self=this;actions.forEach(function(action){self.addArgument(action)})};HelpFormatter.prototype.formatHelp=function(){var help=this._rootSection.formatHelp(this);if(help){help=help.replace(this._longBreakMatcher,$$.EOL+$$.EOL);help=_.str.strip(help,$$.EOL)+$$.EOL}return help};HelpFormatter.prototype._joinParts=function(partStrings){return partStrings.filter(function(part){return!!part&&part!==$$.SUPPRESS}).join("")};HelpFormatter.prototype._formatUsage=function(usage,actions,groups,prefix){if(!prefix&&!_.isString(prefix)){prefix="usage: "}actions=actions||[];groups=groups||[];if(usage){usage=_.str.sprintf(usage,{prog:this._prog})}else if(!usage&&actions.length===0){usage=this._prog}else if(!usage){var prog=this._prog;var optionals=[];var positionals=[];var actionUsage;var textWidth;actions.forEach(function(action){if(action.isOptional()){optionals.push(action)}else{positionals.push(action)}});actionUsage=this._formatActionsUsage([].concat(optionals,positionals),groups);usage=[prog,actionUsage].join(" ");textWidth=this._width-this._currentIndent;if(prefix.length+usage.length>textWidth){var regexpPart=new RegExp("\\(.*?\\)+|\\[.*?\\]+|\\S+","g");var optionalUsage=this._formatActionsUsage(optionals,groups);var positionalUsage=this._formatActionsUsage(positionals,groups);var optionalParts=optionalUsage.match(regexpPart);var positionalParts=positionalUsage.match(regexpPart)||[];if(optionalParts.join(" ")!==optionalUsage){throw new Error("assert \"optionalParts.join(' ') === optionalUsage\"")}if(positionalParts.join(" ")!==positionalUsage){throw new Error("assert \"positionalParts.join(' ') === positionalUsage\"")}var _getLines=function(parts,indent,prefix){var lines=[];var line=[];var lineLength=!!prefix?prefix.length-1:indent.length-1;parts.forEach(function(part){if(lineLength+1+part.length>textWidth){lines.push(indent+line.join(" "));line=[];lineLength=indent.length-1}line.push(part);lineLength+=part.length+1});if(line){lines.push(indent+line.join(" "))}if(prefix){lines[0]=lines[0].substr(indent.length)}return lines};var lines,indent,parts;if(prefix.length+prog.length<=.75*textWidth){indent=_.str.repeat(" ",prefix.length+prog.length+1);if(optionalParts){lines=[].concat(_getLines([prog].concat(optionalParts),indent,prefix),_getLines(positionalParts,indent))}else if(positionalParts){lines=_getLines([prog].concat(positionalParts),indent,prefix)}else{lines=[prog]}}else{indent=_.str.repeat(" ",prefix.length);parts=optionalParts+positionalParts;lines=_getLines(parts,indent);if(lines.length>1){lines=[].concat(_getLines(optionalParts,indent),_getLines(positionalParts,indent))}lines=[prog]+lines}usage=lines.join($$.EOL)}}return prefix+usage+$$.EOL+$$.EOL};HelpFormatter.prototype._formatActionsUsage=function(actions,groups){var groupActions=[];var inserts=[];var self=this;groups.forEach(function(group){var end;var i;var start=actions.indexOf(group._groupActions[0]);if(start>=0){end=start+group._groupActions.length;if(_.isEqual(actions.slice(start,end),group._groupActions)){group._groupActions.forEach(function(action){groupActions.push(action)});if(!group.required){if(!!inserts[start]){inserts[start]+=" ["}else{inserts[start]="["}inserts[end]="]"}else{if(!!inserts[start]){inserts[start]+=" ("}else{inserts[start]="("}inserts[end]=")"}for(i=start+1;i<end;i+=1){inserts[i]="|"}}}});var parts=[];actions.forEach(function(action,actionIndex){var part;var optionString;var argsDefault;var argsString;if(action.help===$$.SUPPRESS){parts.push(null);if(inserts[actionIndex]==="|"){inserts.splice(actionIndex,actionIndex)}else if(inserts[actionIndex+1]==="|"){inserts.splice(actionIndex+1,actionIndex+1)}}else if(!action.isOptional()){part=self._formatArgs(action,action.dest);if(groupActions.indexOf(action)>=0){if(part[0]==="["&&part[part.length-1]==="]"){part=part.slice(1,-1)}}parts.push(part)}else{optionString=action.optionStrings[0];if(action.nargs===0){part=""+optionString}else{argsDefault=action.dest.toUpperCase();argsString=self._formatArgs(action,argsDefault);part=optionString+" "+argsString}if(!action.required&&groupActions.indexOf(action)<0){part="["+part+"]"}parts.push(part)}});for(var i=inserts.length-1;i>=0;--i){if(inserts[i]!==null){parts.splice(i,0,inserts[i])}}var text=parts.filter(function(part){return!!part}).join(" ");text=text.replace(/([\[(]) /g,"$1");text=text.replace(/ ([\])])/g,"$1");text=text.replace(/\[ *\]/g,"");text=text.replace(/\( *\)/g,"");text=text.replace(/\(([^|]*)\)/g,"$1");text=_.str.strip(text);return text};HelpFormatter.prototype._formatText=function(text){text=_.str.sprintf(text,{prog:this._prog});var textWidth=this._width-this._currentIndent;var indentIncriment=_.str.repeat(" ",this._currentIndent);return this._fillText(text,textWidth,indentIncriment)+$$.EOL+$$.EOL};HelpFormatter.prototype._formatAction=function(action){var self=this;var helpText;var helpLines;var parts;var indentFirst;var helpPosition=Math.min(this._actionMaxLength+2,this._maxHelpPosition);var helpWidth=this._width-helpPosition;var actionWidth=helpPosition-this._currentIndent-2;var actionHeader=this._formatActionInvocation(action);if(!action.help){actionHeader=_.str.repeat(" ",this._currentIndent)+actionHeader+$$.EOL}else if(actionHeader.length<=actionWidth){actionHeader=_.str.repeat(" ",this._currentIndent)+actionHeader+"  "+_.str.repeat(" ",actionWidth-actionHeader.length);indentFirst=0}else{actionHeader=_.str.repeat(" ",this._currentIndent)+actionHeader+$$.EOL;indentFirst=helpPosition}parts=[actionHeader];if(!!action.help){helpText=this._expandHelp(action);helpLines=this._splitLines(helpText,helpWidth);parts.push(_.str.repeat(" ",indentFirst)+helpLines[0]+$$.EOL);helpLines.slice(1).forEach(function(line){parts.push(_.str.repeat(" ",helpPosition)+line+$$.EOL)})}else if(actionHeader.charAt(actionHeader.length-1)!==$$.EOL){parts.push($$.EOL)}if(!!action._getSubactions){this._indent();action._getSubactions().forEach(function(subaction){parts.push(self._formatAction(subaction))});this._dedent()}return this._joinParts(parts)};HelpFormatter.prototype._formatActionInvocation=function(action){if(!action.isOptional()){var format_func=this._metavarFormatter(action,action.dest);var metavars=format_func(1);return metavars[0]}else{var parts=[];var argsDefault;var argsString;if(action.nargs===0){parts=parts.concat(action.optionStrings)}else{argsDefault=action.dest.toUpperCase();argsString=this._formatArgs(action,argsDefault);action.optionStrings.forEach(function(optionString){parts.push(optionString+" "+argsString)})}return parts.join(", ")}};HelpFormatter.prototype._metavarFormatter=function(action,metavarDefault){var result;if(!!action.metavar||action.metavar===""){result=action.metavar}else if(!!action.choices){var choices=action.choices;if(_.isString(choices)){choices=choices.split("").join(", ")}else if(_.isArray(choices)){choices=choices.join(",")}else{choices=_.keys(choices).join(",")}result="{"+choices+"}"}else{result=metavarDefault}return function(size){if(Array.isArray(result)){return result}else{var metavars=[];for(var i=0;i<size;i+=1){metavars.push(result)}return metavars}}};HelpFormatter.prototype._formatArgs=function(action,metavarDefault){var result;var metavars;var buildMetavar=this._metavarFormatter(action,metavarDefault);switch(action.nargs){case undefined:case null:metavars=buildMetavar(1);result=""+metavars[0];break;case $$.OPTIONAL:metavars=buildMetavar(1);result="["+metavars[0]+"]";break;case $$.ZERO_OR_MORE:metavars=buildMetavar(2);result="["+metavars[0]+" ["+metavars[1]+" ...]]";break;case $$.ONE_OR_MORE:metavars=buildMetavar(2);result=""+metavars[0]+" ["+metavars[1]+" ...]";break;case $$.REMAINDER:result="...";break;case $$.PARSER:metavars=buildMetavar(1);result=metavars[0]+" ...";break;default:metavars=buildMetavar(action.nargs);result=metavars.join(" ")}return result};HelpFormatter.prototype._expandHelp=function(action){var actionProperty;var actionValue;var params={prog:this._prog};for(actionProperty in action){if(action.hasOwnProperty(actionProperty)){actionValue=action[actionProperty];if(actionValue!==$$.SUPPRESS){params[actionProperty]=actionValue}}}if(!!params.choices){if(_.isString(params.choices)){params.choices=params.choices.split("").join(", ")}else if(_.isArray(params.choices)){params.choices=params.choices.join(", ")}else{params.choices=_.keys(params.choices).join(", ")}}return _.str.sprintf(this._getHelpString(action),params)};HelpFormatter.prototype._splitLines=function(text,width){var lines=[];var delimiters=[" ",".",",","!","?"];var re=new RegExp("["+delimiters.join("")+"][^"+delimiters.join("")+"]*$");text=text.replace(/[\n\|\t]/g," ");text=_.str.strip(text);text=text.replace(this._whitespaceMatcher," ");text.split($$.EOL).forEach(function(line){if(width>=line.length){lines.push(line);return}var wrapStart=0;var wrapEnd=width;var delimiterIndex=0;while(wrapEnd<=line.length){if(wrapEnd!==line.length&&delimiters.indexOf(line[wrapEnd]<-1)){delimiterIndex=(re.exec(line.substring(wrapStart,wrapEnd))||{}).index;wrapEnd=wrapStart+delimiterIndex+1}lines.push(line.substring(wrapStart,wrapEnd));wrapStart=wrapEnd;wrapEnd+=width}if(wrapStart<line.length){lines.push(line.substring(wrapStart,wrapEnd))}});return lines};HelpFormatter.prototype._fillText=function(text,width,indent){var lines=this._splitLines(text,width);lines=lines.map(function(line){return indent+line});return lines.join($$.EOL)};HelpFormatter.prototype._getHelpString=function(action){return action.help};provide("argparse/lib/help/formatter",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var _=require("underscore");var Namespace=module.exports=function Namespace(options){_.extend(this,options)};Namespace.prototype.isset=function(key){return _.has(this,key)};Namespace.prototype.set=function(key,value){if(typeof key==="object"){_.extend(this,key)}else{this[key]=value}return this};Namespace.prototype.get=function(key,defaultValue){return!this[key]?defaultValue:this[key]};Namespace.prototype.unset=function(key,defaultValue){var value=this[key];if(value!==null){delete this[key];return value}else{return defaultValue}};provide("argparse/lib/namespace",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var _=require("underscore");_.str=require("underscore.string");var $$=require("argparse/lib/const");function Section(parent,heading){this._parent=parent;this._heading=heading;this._items=[]}Section.prototype.addItem=function(callback){this._items.push(callback)};Section.prototype.formatHelp=function(formatter){var itemHelp,heading;if(!!this._parent){formatter._indent()}itemHelp=this._items.map(function(item){var obj,func,args;obj=formatter;func=item[0];args=item[1];return func.apply(obj,args)});itemHelp=formatter._joinParts(itemHelp);if(!!this._parent){formatter._dedent()}if(!itemHelp){return""}heading="";if(!!this._heading&&this._heading!==$$.SUPPRESS){var currentIndent=formatter.currentIndent;heading=_.str.repeat(" ",currentIndent)+this._heading+":"+$$.EOL}return formatter._joinParts([$$.EOL,heading,itemHelp,$$.EOL])};var HelpFormatter=module.exports=function HelpFormatter(options){options=options||{};this._prog=options.prog;this._maxHelpPosition=options.maxHelpPosition||24;this._width=options.width||(process.env.COLUMNS||80)-2;this._currentIndent=0;this._indentIncriment=options.indentIncriment||2;this._level=0;this._actionMaxLength=0;this._rootSection=new Section(null);this._currentSection=this._rootSection;this._whitespaceMatcher=new RegExp("\\s+","g");this._longBreakMatcher=new RegExp($$.EOL+$$.EOL+$$.EOL+"+","g")};HelpFormatter.prototype._indent=function(){this._currentIndent+=this._indentIncriment;this._level+=1};HelpFormatter.prototype._dedent=function(){this._currentIndent-=this._indentIncriment;this._level-=1;if(this._currentIndent<0){throw new Error("Indent decreased below 0.")}};HelpFormatter.prototype._addItem=function(func,args){this._currentSection.addItem([func,args])};HelpFormatter.prototype.startSection=function(heading){this._indent();var section=new Section(this._currentSection,heading);var func=section.formatHelp.bind(section);this._addItem(func,[this]);this._currentSection=section};HelpFormatter.prototype.endSection=function(){this._currentSection=this._currentSection._parent;this._dedent()};HelpFormatter.prototype.addText=function(text){if(!!text&&text!==$$.SUPPRESS){this._addItem(this._formatText,[text])}};HelpFormatter.prototype.addUsage=function(usage,actions,groups,prefix){if(usage!==$$.SUPPRESS){this._addItem(this._formatUsage,[usage,actions,groups,prefix])}};HelpFormatter.prototype.addArgument=function(action){if(action.help!==$$.SUPPRESS){var self=this;var invocations=[this._formatActionInvocation(action)];var invocationLength=invocations[0].length;var actionLength;if(!!action._getSubactions){this._indent();action._getSubactions().forEach(function(subaction){var invocationNew=self._formatActionInvocation(subaction);invocations.push(invocationNew);invocationLength=Math.max(invocationLength,invocationNew.length)});this._dedent()}actionLength=invocationLength+this._currentIndent;this._actionMaxLength=Math.max(this._actionMaxLength,actionLength);this._addItem(this._formatAction,[action])}};HelpFormatter.prototype.addArguments=function(actions){var self=this;actions.forEach(function(action){self.addArgument(action)})};HelpFormatter.prototype.formatHelp=function(){var help=this._rootSection.formatHelp(this);if(help){help=help.replace(this._longBreakMatcher,$$.EOL+$$.EOL);help=_.str.strip(help,$$.EOL)+$$.EOL}return help};HelpFormatter.prototype._joinParts=function(partStrings){return partStrings.filter(function(part){return!!part&&part!==$$.SUPPRESS}).join("")};HelpFormatter.prototype._formatUsage=function(usage,actions,groups,prefix){if(!prefix&&!_.isString(prefix)){prefix="usage: "}actions=actions||[];groups=groups||[];if(usage){usage=_.str.sprintf(usage,{prog:this._prog})}else if(!usage&&actions.length===0){usage=this._prog}else if(!usage){var prog=this._prog;var optionals=[];var positionals=[];var actionUsage;var textWidth;actions.forEach(function(action){if(action.isOptional()){optionals.push(action)}else{positionals.push(action)}});actionUsage=this._formatActionsUsage([].concat(optionals,positionals),groups);usage=[prog,actionUsage].join(" ");textWidth=this._width-this._currentIndent;if(prefix.length+usage.length>textWidth){var regexpPart=new RegExp("\\(.*?\\)+|\\[.*?\\]+|\\S+","g");var optionalUsage=this._formatActionsUsage(optionals,groups);var positionalUsage=this._formatActionsUsage(positionals,groups);var optionalParts=optionalUsage.match(regexpPart);var positionalParts=positionalUsage.match(regexpPart)||[];if(optionalParts.join(" ")!==optionalUsage){throw new Error("assert \"optionalParts.join(' ') === optionalUsage\"")}if(positionalParts.join(" ")!==positionalUsage){throw new Error("assert \"positionalParts.join(' ') === positionalUsage\"")}var _getLines=function(parts,indent,prefix){var lines=[];var line=[];var lineLength=!!prefix?prefix.length-1:indent.length-1;parts.forEach(function(part){if(lineLength+1+part.length>textWidth){lines.push(indent+line.join(" "));line=[];lineLength=indent.length-1}line.push(part);lineLength+=part.length+1});if(line){lines.push(indent+line.join(" "))}if(prefix){lines[0]=lines[0].substr(indent.length)}return lines};var lines,indent,parts;if(prefix.length+prog.length<=.75*textWidth){indent=_.str.repeat(" ",prefix.length+prog.length+1);if(optionalParts){lines=[].concat(_getLines([prog].concat(optionalParts),indent,prefix),_getLines(positionalParts,indent))}else if(positionalParts){lines=_getLines([prog].concat(positionalParts),indent,prefix)}else{lines=[prog]}}else{indent=_.str.repeat(" ",prefix.length);parts=optionalParts+positionalParts;lines=_getLines(parts,indent);if(lines.length>1){lines=[].concat(_getLines(optionalParts,indent),_getLines(positionalParts,indent))}lines=[prog]+lines}usage=lines.join($$.EOL)}}return prefix+usage+$$.EOL+$$.EOL};HelpFormatter.prototype._formatActionsUsage=function(actions,groups){var groupActions=[];var inserts=[];var self=this;groups.forEach(function(group){var end;var i;var start=actions.indexOf(group._groupActions[0]);if(start>=0){end=start+group._groupActions.length;if(_.isEqual(actions.slice(start,end),group._groupActions)){group._groupActions.forEach(function(action){groupActions.push(action)});if(!group.required){if(!!inserts[start]){inserts[start]+=" ["}else{inserts[start]="["}inserts[end]="]"}else{if(!!inserts[start]){inserts[start]+=" ("}else{inserts[start]="("}inserts[end]=")"}for(i=start+1;i<end;i+=1){inserts[i]="|"}}}});var parts=[];actions.forEach(function(action,actionIndex){var part;var optionString;var argsDefault;var argsString;if(action.help===$$.SUPPRESS){parts.push(null);if(inserts[actionIndex]==="|"){inserts.splice(actionIndex,actionIndex)}else if(inserts[actionIndex+1]==="|"){inserts.splice(actionIndex+1,actionIndex+1)}}else if(!action.isOptional()){part=self._formatArgs(action,action.dest);if(groupActions.indexOf(action)>=0){if(part[0]==="["&&part[part.length-1]==="]"){part=part.slice(1,-1)}}parts.push(part)}else{optionString=action.optionStrings[0];if(action.nargs===0){part=""+optionString}else{argsDefault=action.dest.toUpperCase();argsString=self._formatArgs(action,argsDefault);part=optionString+" "+argsString}if(!action.required&&groupActions.indexOf(action)<0){part="["+part+"]"}parts.push(part)}});for(var i=inserts.length-1;i>=0;--i){if(inserts[i]!==null){parts.splice(i,0,inserts[i])}}var text=parts.filter(function(part){return!!part}).join(" ");text=text.replace(/([\[(]) /g,"$1");text=text.replace(/ ([\])])/g,"$1");text=text.replace(/\[ *\]/g,"");text=text.replace(/\( *\)/g,"");text=text.replace(/\(([^|]*)\)/g,"$1");text=_.str.strip(text);return text};HelpFormatter.prototype._formatText=function(text){text=_.str.sprintf(text,{prog:this._prog});var textWidth=this._width-this._currentIndent;var indentIncriment=_.str.repeat(" ",this._currentIndent);return this._fillText(text,textWidth,indentIncriment)+$$.EOL+$$.EOL};HelpFormatter.prototype._formatAction=function(action){var self=this;var helpText;var helpLines;var parts;
var indentFirst;var helpPosition=Math.min(this._actionMaxLength+2,this._maxHelpPosition);var helpWidth=this._width-helpPosition;var actionWidth=helpPosition-this._currentIndent-2;var actionHeader=this._formatActionInvocation(action);if(!action.help){actionHeader=_.str.repeat(" ",this._currentIndent)+actionHeader+$$.EOL}else if(actionHeader.length<=actionWidth){actionHeader=_.str.repeat(" ",this._currentIndent)+actionHeader+"  "+_.str.repeat(" ",actionWidth-actionHeader.length);indentFirst=0}else{actionHeader=_.str.repeat(" ",this._currentIndent)+actionHeader+$$.EOL;indentFirst=helpPosition}parts=[actionHeader];if(!!action.help){helpText=this._expandHelp(action);helpLines=this._splitLines(helpText,helpWidth);parts.push(_.str.repeat(" ",indentFirst)+helpLines[0]+$$.EOL);helpLines.slice(1).forEach(function(line){parts.push(_.str.repeat(" ",helpPosition)+line+$$.EOL)})}else if(actionHeader.charAt(actionHeader.length-1)!==$$.EOL){parts.push($$.EOL)}if(!!action._getSubactions){this._indent();action._getSubactions().forEach(function(subaction){parts.push(self._formatAction(subaction))});this._dedent()}return this._joinParts(parts)};HelpFormatter.prototype._formatActionInvocation=function(action){if(!action.isOptional()){var format_func=this._metavarFormatter(action,action.dest);var metavars=format_func(1);return metavars[0]}else{var parts=[];var argsDefault;var argsString;if(action.nargs===0){parts=parts.concat(action.optionStrings)}else{argsDefault=action.dest.toUpperCase();argsString=this._formatArgs(action,argsDefault);action.optionStrings.forEach(function(optionString){parts.push(optionString+" "+argsString)})}return parts.join(", ")}};HelpFormatter.prototype._metavarFormatter=function(action,metavarDefault){var result;if(!!action.metavar||action.metavar===""){result=action.metavar}else if(!!action.choices){var choices=action.choices;if(_.isString(choices)){choices=choices.split("").join(", ")}else if(_.isArray(choices)){choices=choices.join(",")}else{choices=_.keys(choices).join(",")}result="{"+choices+"}"}else{result=metavarDefault}return function(size){if(Array.isArray(result)){return result}else{var metavars=[];for(var i=0;i<size;i+=1){metavars.push(result)}return metavars}}};HelpFormatter.prototype._formatArgs=function(action,metavarDefault){var result;var metavars;var buildMetavar=this._metavarFormatter(action,metavarDefault);switch(action.nargs){case undefined:case null:metavars=buildMetavar(1);result=""+metavars[0];break;case $$.OPTIONAL:metavars=buildMetavar(1);result="["+metavars[0]+"]";break;case $$.ZERO_OR_MORE:metavars=buildMetavar(2);result="["+metavars[0]+" ["+metavars[1]+" ...]]";break;case $$.ONE_OR_MORE:metavars=buildMetavar(2);result=""+metavars[0]+" ["+metavars[1]+" ...]";break;case $$.REMAINDER:result="...";break;case $$.PARSER:metavars=buildMetavar(1);result=metavars[0]+" ...";break;default:metavars=buildMetavar(action.nargs);result=metavars.join(" ")}return result};HelpFormatter.prototype._expandHelp=function(action){var actionProperty;var actionValue;var params={prog:this._prog};for(actionProperty in action){if(action.hasOwnProperty(actionProperty)){actionValue=action[actionProperty];if(actionValue!==$$.SUPPRESS){params[actionProperty]=actionValue}}}if(!!params.choices){if(_.isString(params.choices)){params.choices=params.choices.split("").join(", ")}else if(_.isArray(params.choices)){params.choices=params.choices.join(", ")}else{params.choices=_.keys(params.choices).join(", ")}}return _.str.sprintf(this._getHelpString(action),params)};HelpFormatter.prototype._splitLines=function(text,width){var lines=[];var delimiters=[" ",".",",","!","?"];var re=new RegExp("["+delimiters.join("")+"][^"+delimiters.join("")+"]*$");text=text.replace(/[\n\|\t]/g," ");text=_.str.strip(text);text=text.replace(this._whitespaceMatcher," ");text.split($$.EOL).forEach(function(line){if(width>=line.length){lines.push(line);return}var wrapStart=0;var wrapEnd=width;var delimiterIndex=0;while(wrapEnd<=line.length){if(wrapEnd!==line.length&&delimiters.indexOf(line[wrapEnd]<-1)){delimiterIndex=(re.exec(line.substring(wrapStart,wrapEnd))||{}).index;wrapEnd=wrapStart+delimiterIndex+1}lines.push(line.substring(wrapStart,wrapEnd));wrapStart=wrapEnd;wrapEnd+=width}if(wrapStart<line.length){lines.push(line.substring(wrapStart,wrapEnd))}});return lines};HelpFormatter.prototype._fillText=function(text,width,indent){var lines=this._splitLines(text,width);lines=lines.map(function(line){return indent+line});return lines.join($$.EOL)};HelpFormatter.prototype._getHelpString=function(action){return action.help};provide("argparse/lib/help/formatter.js",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var format=require("util").format;var Path=require("path");var _=require("underscore");_.str=require("underscore.string");var $$=require("argparse/lib/const");var ActionContainer=require("argparse/lib/action_container");var argumentErrorHelper=require("argparse/lib/argument/error");var HelpFormatter=require("argparse/lib/help/formatter");var Namespace=require("argparse/lib/namespace");var ArgumentParser=module.exports=function ArgumentParser(options){var self=this;options=options||{};options.description=options.description||null;options.argumentDefault=options.argumentDefault||null;options.prefixChars=options.prefixChars||"-";options.conflictHandler=options.conflictHandler||"error";ActionContainer.call(this,options);options.addHelp=options.addHelp===undefined||!!options.addHelp;options.parents=options.parents||[];options.prog=options.prog||Path.basename(process.argv[1]);this.prog=options.prog;this.usage=options.usage;this.epilog=options.epilog;this.version=options.version;this.debug=options.debug===true;this.formatterClass=options.formatterClass||HelpFormatter;this.fromfilePrefixChars=options.fromfilePrefixChars||null;this._positionals=this.addArgumentGroup({title:"Positional arguments"});this._optionals=this.addArgumentGroup({title:"Optional arguments"});this._subparsers=null;var FUNCTION_IDENTITY=function(o){return o};this.register("type","auto",FUNCTION_IDENTITY);this.register("type",null,FUNCTION_IDENTITY);this.register("type","int",function(x){var result=parseInt(x,10);if(isNaN(result)){throw new Error(x+" is not a valid integer.")}return result});this.register("type","float",function(x){var result=parseFloat(x);if(isNaN(result)){throw new Error(x+" is not a valid float.")}return result});this.register("type","string",function(x){return""+x});var defaultPrefix=this.prefixChars.indexOf("-")>-1?"-":this.prefixChars[0];if(options.addHelp){this.addArgument([defaultPrefix+"h",defaultPrefix+defaultPrefix+"help"],{action:"help",defaultValue:$$.SUPPRESS,help:"Show this help message and exit."})}if(this.version!==undefined){this.addArgument([defaultPrefix+"v",defaultPrefix+defaultPrefix+"version"],{action:"version",version:this.version,defaultValue:$$.SUPPRESS,help:"Show program's version number and exit."})}options.parents.forEach(function(parent){self._addContainerActions(parent);if(parent._defaults!==undefined){for(var defaultKey in parent._defaults){if(parent._defaults.hasOwnProperty(defaultKey)){self._defaults[defaultKey]=parent._defaults[defaultKey]}}}})};util.inherits(ArgumentParser,ActionContainer);ArgumentParser.prototype.addSubparsers=function(options){if(!!this._subparsers){this.error("Cannot have multiple subparser arguments.")}options=options||{};options.debug=this.debug===true;options.optionStrings=[];options.parserClass=options.parserClass||ArgumentParser;if(!!options.title||!!options.description){this._subparsers=this.addArgumentGroup({title:options.title||"subcommands",description:options.description});delete options.title;delete options.description}else{this._subparsers=this._positionals}if(!options.prog){var formatter=this._getFormatter();var positionals=this._getPositionalActions();var groups=this._mutuallyExclusiveGroups;formatter.addUsage(this.usage,positionals,groups,"");options.prog=_.str.strip(formatter.formatHelp())}var ParsersClass=this._popActionClass(options,"parsers");var action=new ParsersClass(options);this._subparsers._addAction(action);return action};ArgumentParser.prototype._addAction=function(action){if(action.isOptional()){this._optionals._addAction(action)}else{this._positionals._addAction(action)}return action};ArgumentParser.prototype._getOptionalActions=function(){return this._actions.filter(function(action){return action.isOptional()})};ArgumentParser.prototype._getPositionalActions=function(){return this._actions.filter(function(action){return action.isPositional()})};ArgumentParser.prototype.parseArgs=function(args,namespace){var argv;var result=this.parseKnownArgs(args,namespace);args=result[0];argv=result[1];if(argv&&argv.length>0){this.error(format("Unrecognized arguments: %s.",argv.join(" ")))}return args};ArgumentParser.prototype.parseKnownArgs=function(args,namespace){var self=this;args=args||process.argv.slice(2);namespace=namespace||new Namespace;self._actions.forEach(function(action){if(action.dest!==$$.SUPPRESS){if(!_.has(namespace,action.dest)){if(action.defaultValue!==$$.SUPPRESS){var defaultValue=action.defaultValue;if(_.isString(action.defaultValue)){defaultValue=self._getValue(action,defaultValue)}namespace[action.dest]=defaultValue}}}});_.keys(self._defaults).forEach(function(dest){namespace[dest]=self._defaults[dest]});try{var res=this._parseKnownArgs(args,namespace);namespace=res[0];args=res[1];if(_.has(namespace,$$._UNRECOGNIZED_ARGS_ATTR)){args=_.union(args,namespace[$$._UNRECOGNIZED_ARGS_ATTR]);delete namespace[$$._UNRECOGNIZED_ARGS_ATTR]}return[namespace,args]}catch(e){this.error(e)}};ArgumentParser.prototype._parseKnownArgs=function(argStrings,namespace){var self=this;var extras=[];if(this.fromfilePrefixChars!==null){argStrings=this._readArgsFromFiles(argStrings)}function actionHash(action){return action.getName()}var conflicts,key;var actionConflicts={};this._mutuallyExclusiveGroups.forEach(function(mutexGroup){mutexGroup._groupActions.forEach(function(mutexAction,i,groupActions){key=actionHash(mutexAction);if(!_.has(actionConflicts,key)){actionConflicts[key]=[]}conflicts=actionConflicts[key];conflicts.push.apply(conflicts,groupActions.slice(0,i));conflicts.push.apply(conflicts,groupActions.slice(i+1))})});var optionStringIndices={};var argStringPatternParts=[];argStrings.forEach(function(argString,argStringIndex){if(argString==="--"){argStringPatternParts.push("-");while(argStringIndex<argStrings.length){argStringPatternParts.push("A");argStringIndex++}}else{var pattern;var optionTuple=self._parseOptional(argString);if(!optionTuple){pattern="A"}else{optionStringIndices[argStringIndex]=optionTuple;pattern="O"}argStringPatternParts.push(pattern)}});var argStringsPattern=argStringPatternParts.join("");var seenActions=[];var seenNonDefaultActions=[];function takeAction(action,argumentStrings,optionString){seenActions.push(action);var argumentValues=self._getValues(action,argumentStrings);if(argumentValues!==action.defaultValue){seenNonDefaultActions.push(action);if(!!actionConflicts[actionHash(action)]){actionConflicts[actionHash(action)].forEach(function(actionConflict){if(seenNonDefaultActions.indexOf(actionConflict)>=0){throw argumentErrorHelper(action,format('Not allowed with argument "%s".',actionConflict.getName()))}})}}if(argumentValues!==$$.SUPPRESS){action.call(self,namespace,argumentValues,optionString)}}function consumeOptional(startIndex){var optionTuple=optionStringIndices[startIndex];var action=optionTuple[0];var optionString=optionTuple[1];var explicitArg=optionTuple[2];var actionTuples=[];var args,argCount,start,stop;while(true){if(!action){extras.push(argStrings[startIndex]);return startIndex+1}if(!!explicitArg){argCount=self._matchArgument(action,"A");var chars=self.prefixChars;if(argCount===0&&chars.indexOf(optionString[1])<0){actionTuples.push([action,[],optionString]);optionString=optionString[0]+explicitArg[0];var newExplicitArg=explicitArg.slice(1)||null;var optionalsMap=self._optionStringActions;if(_.keys(optionalsMap).indexOf(optionString)>=0){action=optionalsMap[optionString];explicitArg=newExplicitArg}else{var msg="ignored explicit argument %r";throw argumentErrorHelper(action,msg)}}else if(argCount===1){stop=startIndex+1;args=[explicitArg];actionTuples.push([action,args,optionString]);break}else{var message="ignored explicit argument %r";throw argumentErrorHelper(action,_.str.sprintf(message,explicitArg))}}else{start=startIndex+1;var selectedPatterns=argStringsPattern.substr(start);argCount=self._matchArgument(action,selectedPatterns);stop=start+argCount;args=argStrings.slice(start,stop);actionTuples.push([action,args,optionString]);break}}if(actionTuples.length<1){throw new Error("length should be > 0")}for(var i=0;i<actionTuples.length;i++){takeAction.apply(self,actionTuples[i])}return stop}var positionals=self._getPositionalActions();function consumePositionals(startIndex){var selectedPattern=argStringsPattern.substr(startIndex);var argCounts=self._matchArgumentsPartial(positionals,selectedPattern);_.zip(positionals,argCounts).forEach(function(item){var action=item[0];var argCount=item[1];if(argCount===undefined){return}var args=argStrings.slice(startIndex,startIndex+argCount);startIndex+=argCount;takeAction(action,args)});positionals=positionals.slice(argCounts.length);return startIndex}var startIndex=0;var position;var maxOptionStringIndex=-1;if(!!optionStringIndices){for(position in optionStringIndices){maxOptionStringIndex=Math.max(maxOptionStringIndex,parseInt(position,10))}}var positionalsEndIndex,nextOptionStringIndex;while(startIndex<=maxOptionStringIndex){nextOptionStringIndex=null;for(position in optionStringIndices){position=parseInt(position,10);if(position>=startIndex){if(nextOptionStringIndex!==null){nextOptionStringIndex=Math.min(nextOptionStringIndex,position)}else{nextOptionStringIndex=position}}}if(startIndex!==nextOptionStringIndex){positionalsEndIndex=consumePositionals(startIndex);if(positionalsEndIndex>startIndex){startIndex=positionalsEndIndex;continue}else{startIndex=positionalsEndIndex}}if(!optionStringIndices[startIndex]){var strings=argStrings.slice(startIndex,nextOptionStringIndex);extras=extras.concat(strings);startIndex=nextOptionStringIndex}startIndex=consumeOptional(startIndex)}var stopIndex=consumePositionals(startIndex);extras=extras.concat(_.rest(argStrings,stopIndex));if(positionals.length>0){self.error("too few arguments")}self._actions.forEach(function(action){if(action.required){if(_.indexOf(seenActions,action)<0){self.error(format('Argument "%s" is required',action.getName()))}}});var actionUsed=false;self._mutuallyExclusiveGroups.forEach(function(group){if(group.required){actionUsed=_.any(group._groupActions,function(action){return _.contains(seenNonDefaultActions,action)});if(!actionUsed){var names=[];group._groupActions.forEach(function(action){if(action.help!==$$.SUPPRESS){names.push(action.getName())}});names=names.join(" ");var msg="one of the arguments "+names+" is required";self.error(msg)}}});return[namespace,extras]};ArgumentParser.prototype._readArgsFromFiles=function(argStrings){var _this=this;var fs=require("fs");var newArgStrings=[];argStrings.forEach(function(argString){if(_this.fromfilePrefixChars.indexOf(argString[0])<0){newArgStrings.push(argString)}else{try{var argstrs=[];var filename=argString.slice(1);var content=fs.readFileSync(filename,"utf8");content=content.trim().split("\n");content.forEach(function(argLine){_this.convertArgLineToArgs(argLine).forEach(function(arg){argstrs.push(arg)});argstrs=_this._readArgsFromFiles(argstrs)});newArgStrings.push.apply(newArgStrings,argstrs)}catch(error){return _this.error(error.message)}}});return newArgStrings};ArgumentParser.prototype.convertArgLineToArgs=function(argLine){return[argLine]};ArgumentParser.prototype._matchArgument=function(action,regexpArgStrings){var regexpNargs=new RegExp("^"+this._getNargsPattern(action));var matches=regexpArgStrings.match(regexpNargs);var message;if(!matches){switch(action.nargs){case undefined:case null:message="Expected one argument.";break;case $$.OPTIONAL:message="Expected at most one argument.";break;case $$.ONE_OR_MORE:message="Expected at least one argument.";break;default:message="Expected %s argument(s)"}throw argumentErrorHelper(action,format(message,action.nargs))}return matches[1].length};ArgumentParser.prototype._matchArgumentsPartial=function(actions,regexpArgStrings){var self=this;var result=[];var actionSlice,pattern,matches;var i,j;var getLength=function(string){return string.length};for(i=actions.length;i>0;i-=1){pattern="";actionSlice=actions.slice(0,i);for(j in actionSlice){pattern+=self._getNargsPattern(actionSlice[j])}pattern=new RegExp("^"+pattern);matches=regexpArgStrings.match(pattern);if(matches&&matches.length>0){matches=matches.splice(1);result=result.concat(matches.map(getLength));break}}return result};ArgumentParser.prototype._parseOptional=function(argString){var action,optionString,argExplicit,optionTuples;if(!argString){return null}if(this.prefixChars.indexOf(argString[0])<0){return null}if(!!this._optionStringActions[argString]){return[this._optionStringActions[argString],argString,null]}if(argString.length===1){return null}if(argString.indexOf("=")>=0){var argStringSplit=argString.split("=");optionString=argStringSplit[0];argExplicit=argStringSplit[1];if(!!this._optionStringActions[optionString]){action=this._optionStringActions[optionString];return[action,optionString,argExplicit]}}optionTuples=this._getOptionTuples(argString);if(optionTuples.length>1){var optionStrings=optionTuples.map(function(optionTuple){return optionTuple[1]});this.error(format('Ambiguous option: "%s" could match %s.',argString,optionStrings.join(", ")))}else if(optionTuples.length===1){return optionTuples[0]}if(argString.match(this._regexpNegativeNumber)){if(!_.any(this._hasNegativeNumberOptionals)){return null}}if(argString.search(" ")>=0){return null}return[null,argString,null]};ArgumentParser.prototype._getOptionTuples=function(optionString){var result=[];var chars=this.prefixChars;var optionPrefix;var argExplicit;var action;var actionOptionString;if(chars.indexOf(optionString[0])>=0&&chars.indexOf(optionString[1])>=0){if(optionString.indexOf("=")>=0){var optionStringSplit=optionString.split("=",1);optionPrefix=optionStringSplit[0];argExplicit=optionStringSplit[1]}else{optionPrefix=optionString;argExplicit=null}for(actionOptionString in this._optionStringActions){if(actionOptionString.substr(0,optionPrefix.length)===optionPrefix){action=this._optionStringActions[actionOptionString];result.push([action,actionOptionString,argExplicit])}}}else if(chars.indexOf(optionString[0])>=0&&chars.indexOf(optionString[1])<0){optionPrefix=optionString;argExplicit=null;var optionPrefixShort=optionString.substr(0,2);var argExplicitShort=optionString.substr(2);for(actionOptionString in this._optionStringActions){action=this._optionStringActions[actionOptionString];if(actionOptionString===optionPrefixShort){result.push([action,actionOptionString,argExplicitShort])}else if(actionOptionString.substr(0,optionPrefix.length)===optionPrefix){result.push([action,actionOptionString,argExplicit])}}}else{throw new Error(format("Unexpected option string: %s.",optionString))}return result};ArgumentParser.prototype._getNargsPattern=function(action){var regexpNargs;switch(action.nargs){case undefined:case null:regexpNargs="(-*A-*)";break;case $$.OPTIONAL:regexpNargs="(-*A?-*)";break;case $$.ZERO_OR_MORE:regexpNargs="(-*[A-]*)";break;case $$.ONE_OR_MORE:regexpNargs="(-*A[A-]*)";break;case $$.REMAINDER:regexpNargs="([-AO]*)";break;case $$.PARSER:regexpNargs="(-*A[-AO]*)";break;default:regexpNargs="(-*"+_.str.repeat("-*A",action.nargs)+"-*)"}if(action.isOptional()){regexpNargs=regexpNargs.replace(/-\*/g,"");regexpNargs=regexpNargs.replace(/-/g,"")}return regexpNargs};ArgumentParser.prototype._getValues=function(action,argStrings){var self=this;if(action.nargs!==$$.PARSER&&action.nargs!==$$.REMAINDER){argStrings=argStrings.filter(function(arrayElement){return arrayElement!=="--"})}var value,argString;if(argStrings.length===0&&action.nargs===$$.OPTIONAL){value=action.isOptional()?action.constant:action.defaultValue;if(typeof value==="string"){value=this._getValue(action,value);this._checkValue(action,value)}}else if(argStrings.length===0&&action.nargs===$$.ZERO_OR_MORE&&action.optionStrings.length===0){value=action.defaultValue||argStrings;this._checkValue(action,value)}else if(argStrings.length===1&&(!action.nargs||action.nargs===$$.OPTIONAL)){argString=argStrings[0];value=this._getValue(action,argString);this._checkValue(action,value)}else if(action.nargs===$$.REMAINDER){value=argStrings.map(function(v){return self._getValue(action,v)})}else if(action.nargs===$$.PARSER){value=argStrings.map(function(v){return self._getValue(action,v)});this._checkValue(action,value[0])}else{value=argStrings.map(function(v){return self._getValue(action,v)});value.forEach(function(v){self._checkValue(action,v)})}return value};ArgumentParser.prototype._getValue=function(action,argString){var result;var typeFunction=this._registryGet("type",action.type,action.type);if(!_.isFunction(typeFunction)){var message=format("%s is not callable",typeFunction);throw argumentErrorHelper(action,message)}try{result=typeFunction(argString)}catch(e){var name=null;if(_.isString(action.type)){name=action.type}else{name=action.type.name||action.type.displayName||"<function>"}var msg=format("Invalid %s value: %s",name,argString);if(name==="<function>"){msg+="\n"+e.message}throw argumentErrorHelper(action,msg)}return result};ArgumentParser.prototype._checkValue=function(action,value){var choices=action.choices;if(!!choices){if((_.isString(choices)||_.isArray(choices))&&choices.indexOf(value)!==-1){return}if(_.isObject(choices)&&!_.isArray(choices)&&choices[value]){return}if(_.isString(choices)){choices=choices.split("").join(", ")}else if(_.isArray(choices)){choices=choices.join(", ")}else{choices=_.keys(choices).join(", ")}var message=format("Invalid choice: %s (choose from [%s])",value,choices);throw argumentErrorHelper(action,message)}};ArgumentParser.prototype.formatUsage=function(){var formatter=this._getFormatter();formatter.addUsage(this.usage,this._actions,this._mutuallyExclusiveGroups);return formatter.formatHelp()};ArgumentParser.prototype.formatHelp=function(){var formatter=this._getFormatter();formatter.addUsage(this.usage,this._actions,this._mutuallyExclusiveGroups);formatter.addText(this.description);this._actionGroups.forEach(function(actionGroup){formatter.startSection(actionGroup.title);formatter.addText(actionGroup.description);formatter.addArguments(actionGroup._groupActions);formatter.endSection()});formatter.addText(this.epilog);return formatter.formatHelp()};ArgumentParser.prototype._getFormatter=function(){var FormatterClass=this.formatterClass;var formatter=new FormatterClass({prog:this.prog});return formatter};ArgumentParser.prototype.printUsage=function(){this._printMessage(this.formatUsage())};ArgumentParser.prototype.printHelp=function(){this._printMessage(this.formatHelp())};ArgumentParser.prototype._printMessage=function(message,stream){if(!stream){stream=process.stdout}if(message){stream.write(""+message)}};ArgumentParser.prototype.exit=function(status,message){if(!!message){if(status===0){this._printMessage(message)}else{this._printMessage(message,process.stderr)}}process.exit(status)};ArgumentParser.prototype.error=function(err){var message;if(err instanceof Error){if(this.debug===true){throw err}message=err.message}else{message=err}var msg=format("%s: error: %s",this.prog,message)+$$.EOL;if(this.debug===true){throw new Error(msg)}this.printUsage(process.stderr);return this.exit(2,msg)};provide("argparse/lib/argument_parser.js",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");module.exports.EOL="\n";module.exports.SUPPRESS="==SUPPRESS==";module.exports.OPTIONAL="?";module.exports.ZERO_OR_MORE="*";module.exports.ONE_OR_MORE="+";module.exports.PARSER="A...";module.exports.REMAINDER="...";module.exports._UNRECOGNIZED_ARGS_ATTR="_unrecognized_args";provide("argparse/lib/const.js",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";var util=require("util");var _=require("underscore");_.str=require("underscore.string");var $$=require("argparse/lib/const");var HelpFormatter=require("argparse/lib/help/formatter.js");var ArgumentDefaultsHelpFormatter=function ArgumentDefaultsHelpFormatter(options){HelpFormatter.call(this,options)};util.inherits(ArgumentDefaultsHelpFormatter,HelpFormatter);ArgumentDefaultsHelpFormatter.prototype._getHelpString=function(action){var help=action.help;if(action.help.indexOf("%(defaultValue)s")===-1){if(action.defaultValue!==$$.SUPPRESS){var defaulting_nargs=[$$.OPTIONAL,$$.ZERO_OR_MORE];if(action.isOptional()||defaulting_nargs.indexOf(action.nargs)>=0){help+=" (default: %(defaultValue)s)"}}}return help};module.exports.ArgumentDefaultsHelpFormatter=ArgumentDefaultsHelpFormatter;var RawDescriptionHelpFormatter=function RawDescriptionHelpFormatter(options){HelpFormatter.call(this,options)};util.inherits(RawDescriptionHelpFormatter,HelpFormatter);RawDescriptionHelpFormatter.prototype._fillText=function(text,width,indent){var lines=text.split("\n");lines=lines.map(function(line){return _.str.rtrim(indent+line)});return lines.join("\n")};module.exports.RawDescriptionHelpFormatter=RawDescriptionHelpFormatter;var RawTextHelpFormatter=function RawTextHelpFormatter(options){RawDescriptionHelpFormatter.call(this,options)};util.inherits(RawTextHelpFormatter,RawDescriptionHelpFormatter);RawTextHelpFormatter.prototype._splitLines=function(text){return text.split("\n")};module.exports.RawTextHelpFormatter=RawTextHelpFormatter;provide("argparse/lib/help/added_formatters.js",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");"use strict";module.exports.ArgumentParser=require("argparse/lib/argument_parser.js");module.exports.Namespace=require("argparse/lib/namespace");module.exports.Action=require("argparse/lib/action");module.exports.HelpFormatter=require("argparse/lib/help/formatter.js");module.exports.Const=require("argparse/lib/const.js");module.exports.ArgumentDefaultsHelpFormatter=require("argparse/lib/help/added_formatters.js").ArgumentDefaultsHelpFormatter;module.exports.RawDescriptionHelpFormatter=require("argparse/lib/help/added_formatters.js").RawDescriptionHelpFormatter;module.exports.RawTextHelpFormatter=require("argparse/lib/help/added_formatters.js").RawTextHelpFormatter;provide("argparse/lib/argparse",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");module.exports=require("argparse/lib/argparse");provide("argparse",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");module.exports=glob;var fs=require("fs"),minimatch=require("minimatch"),Minimatch=minimatch.Minimatch,inherits=require("inherits"),EE=require("events").EventEmitter,path=require("path"),isDir={},assert=require("assert").ok;function glob(pattern,options,cb){if(typeof options==="function")cb=options,options={};if(!options)options={};if(typeof options==="number"){deprecated();return}var g=new Glob(pattern,options,cb);return g.sync?g.found:g}glob.fnmatch=deprecated;function deprecated(){throw new Error("glob's interface has changed. Please see the docs.")}glob.sync=globSync;function globSync(pattern,options){if(typeof options==="number"){deprecated();return}options=options||{};options.sync=true;return glob(pattern,options)}glob.Glob=Glob;inherits(Glob,EE);function Glob(pattern,options,cb){if(!(this instanceof Glob)){return new Glob(pattern,options,cb)}if(typeof cb==="function"){this.on("error",cb);this.on("end",function(matches){cb(null,matches)})}options=options||{};this.EOF={};this._emitQueue=[];this.maxDepth=options.maxDepth||1e3;this.maxLength=options.maxLength||Infinity;this.cache=options.cache||{};this.statCache=options.statCache||{};this.changedCwd=false;var cwd=process.cwd();if(!options.hasOwnProperty("cwd"))this.cwd=cwd;else{this.cwd=options.cwd;this.changedCwd=path.resolve(options.cwd)!==cwd}this.root=options.root||path.resolve(this.cwd,"/");this.root=path.resolve(this.root);if(process.platform==="win32")this.root=this.root.replace(/\\/g,"/");this.nomount=!!options.nomount;if(!pattern){throw new Error("must provide pattern")}if(options.matchBase&&-1===pattern.indexOf("/")){if(options.noglobstar){throw new Error("base matching requires globstar")}pattern="**/"+pattern}this.strict=options.strict!==false;this.dot=!!options.dot;this.mark=!!options.mark;this.sync=!!options.sync;this.nounique=!!options.nounique;this.nonull=!!options.nonull;this.nosort=!!options.nosort;this.nocase=!!options.nocase;this.stat=!!options.stat;this.debug=!!options.debug||!!options.globDebug;if(this.debug)this.log=console.error;this.silent=!!options.silent;var mm=this.minimatch=new Minimatch(pattern,options);this.options=mm.options;pattern=this.pattern=mm.pattern;this.error=null;this.aborted=false;this._globstars={};EE.call(this);var n=this.minimatch.set.length;this.matches=new Array(n);this.minimatch.set.forEach(iterator.bind(this));function iterator(pattern,i,set){this._process(pattern,0,i,function(er){if(er)this.emit("error",er);if(--n<=0)this._finish()})}}Glob.prototype.log=function(){};Glob.prototype._finish=function(){assert(this instanceof Glob);var nou=this.nounique,all=nou?[]:{};for(var i=0,l=this.matches.length;i<l;i++){var matches=this.matches[i];this.log("matches[%d] =",i,matches);if(!matches){if(this.nonull){var literal=this.minimatch.globSet[i];if(nou)all.push(literal);else all[literal]=true}}else{var m=Object.keys(matches);if(nou)all.push.apply(all,m);else m.forEach(function(m){all[m]=true})}}if(!nou)all=Object.keys(all);if(!this.nosort){all=all.sort(this.nocase?alphasorti:alphasort)}if(this.mark){all=all.map(function(m){var sc=this.cache[m];if(!sc)return m;var isDir=Array.isArray(sc)||sc===2;if(isDir&&m.slice(-1)!=="/"){return m+"/"}if(!isDir&&m.slice(-1)==="/"){return m.replace(/\/+$/,"")}return m},this)}this.log("emitting end",all);this.EOF=this.found=all;this.emitMatch(this.EOF)};function alphasorti(a,b){a=a.toLowerCase();b=b.toLowerCase();return alphasort(a,b)}function alphasort(a,b){return a>b?1:a<b?-1:0}Glob.prototype.abort=function(){this.aborted=true;this.emit("abort")};Glob.prototype.pause=function(){if(this.paused)return;if(this.sync)this.emit("error",new Error("Can't pause/resume sync glob"));this.paused=true;this.emit("pause")};Glob.prototype.resume=function(){if(!this.paused)return;if(this.sync)this.emit("error",new Error("Can't pause/resume sync glob"));this.paused=false;this.emit("resume");this._processEmitQueue()};Glob.prototype.emitMatch=function(m){if(!this.stat||this.statCache[m]||m===this.EOF){this._emitQueue.push(m);this._processEmitQueue()}else{this._stat(m,function(exists,isDir){if(exists){this._emitQueue.push(m);this._processEmitQueue()}})}};Glob.prototype._processEmitQueue=function(m){while(!this._processingEmitQueue&&!this.paused){this._processingEmitQueue=true;var m=this._emitQueue.shift();if(!m){this._processingEmitQueue=false;break}this.log("emit!",m===this.EOF?"end":"match");this.emit(m===this.EOF?"end":"match",m);this._processingEmitQueue=false}};Glob.prototype._process=function(pattern,depth,index,cb_){assert(this instanceof Glob);var cb=function cb(er,res){assert(this instanceof Glob);if(this.paused){if(!this._processQueue){this._processQueue=[];this.once("resume",function(){var q=this._processQueue;this._processQueue=null;q.forEach(function(cb){cb()})})}this._processQueue.push(cb_.bind(this,er,res))}else{cb_.call(this,er,res)}}.bind(this);if(this.aborted)return cb();if(depth>this.maxDepth)return cb();var n=0;
while(typeof pattern[n]==="string"){n++}var prefix;switch(n){case pattern.length:prefix=pattern.join("/");this._stat(prefix,function(exists,isDir){if(exists){if(prefix&&isAbsolute(prefix)&&!this.nomount){if(prefix.charAt(0)==="/"){prefix=path.join(this.root,prefix)}else{prefix=path.resolve(this.root,prefix)}}if(process.platform==="win32")prefix=prefix.replace(/\\/g,"/");this.matches[index]=this.matches[index]||{};this.matches[index][prefix]=true;this.emitMatch(prefix)}return cb()});return;case 0:prefix=null;break;default:prefix=pattern.slice(0,n);prefix=prefix.join("/");break}var read;if(prefix===null)read=".";else if(isAbsolute(prefix)||isAbsolute(pattern.join("/"))){if(!prefix||!isAbsolute(prefix)){prefix=path.join("/",prefix)}read=prefix=path.resolve(prefix);this.log("absolute: ",prefix,this.root,pattern,read)}else{read=prefix}this.log("readdir(%j)",read,this.cwd,this.root);return this._readdir(read,function(er,entries){if(er){return cb()}if(pattern[n]===minimatch.GLOBSTAR){var s=[pattern.slice(0,n).concat(pattern.slice(n+1))];entries.forEach(function(e){if(e.charAt(0)==="."&&!this.dot)return;s.push(pattern.slice(0,n).concat(e).concat(pattern.slice(n+1)));s.push(pattern.slice(0,n).concat(e).concat(pattern.slice(n)))},this);s=s.filter(function(pattern){var key=gsKey(pattern);var seen=!this._globstars[key];this._globstars[key]=true;return seen},this);if(!s.length)return cb();var l=s.length,errState=null;s.forEach(function(gsPattern){this._process(gsPattern,depth+1,index,function(er){if(errState)return;if(er)return cb(errState=er);if(--l<=0)return cb()})},this);return}var pn=pattern[n];var rawGlob=pattern[n]._glob,dotOk=this.dot||rawGlob.charAt(0)===".";entries=entries.filter(function(e){return(e.charAt(0)!=="."||dotOk)&&e.match(pattern[n])});if(n===pattern.length-1&&!this.mark&&!this.stat){entries.forEach(function(e){if(prefix){if(prefix!=="/")e=prefix+"/"+e;else e=prefix+e}if(e.charAt(0)==="/"&&!this.nomount){e=path.join(this.root,e)}if(process.platform==="win32")e=e.replace(/\\/g,"/");this.matches[index]=this.matches[index]||{};this.matches[index][e]=true;this.emitMatch(e)},this);return cb.call(this)}var l=entries.length,errState=null;if(l===0)return cb();entries.forEach(function(e){var p=pattern.slice(0,n).concat(e).concat(pattern.slice(n+1));this._process(p,depth+1,index,function(er){if(errState)return;if(er)return cb(errState=er);if(--l===0)return cb.call(this)})},this)})};function gsKey(pattern){return"**"+pattern.map(function(p){return p===minimatch.GLOBSTAR?"**":""+p}).join("/")}Glob.prototype._stat=function(f,cb){assert(this instanceof Glob);var abs=f;if(f.charAt(0)==="/"){abs=path.join(this.root,f)}else if(this.changedCwd){abs=path.resolve(this.cwd,f)}if(f.length>this.maxLength){var er=new Error("Path name too long");er.code="ENAMETOOLONG";er.path=f;return this._afterStat(f,abs,cb,er)}this.log("stat",[this.cwd,f,"=",abs]);if(!this.stat&&this.cache.hasOwnProperty(f)){var exists=this.cache[f],isDir=exists&&(Array.isArray(exists)||exists===2);if(this.sync)return cb.call(this,!!exists,isDir);return process.nextTick(cb.bind(this,!!exists,isDir))}var stat=this.statCache[abs];if(this.sync||stat){var er;try{stat=fs.statSync(abs)}catch(e){er=e}this._afterStat(f,abs,cb,er,stat)}else{fs.stat(abs,this._afterStat.bind(this,f,abs,cb))}};Glob.prototype._afterStat=function(f,abs,cb,er,stat){var exists;assert(this instanceof Glob);if(abs.slice(-1)==="/"&&stat&&!stat.isDirectory()){this.log("should be ENOTDIR, fake it");er=new Error("ENOTDIR, not a directory '"+abs+"'");er.path=abs;er.code="ENOTDIR";stat=null}var emit=!this.statCache[abs];this.statCache[abs]=stat;if(er||!stat){exists=false}else{exists=stat.isDirectory()?2:1;if(emit)this.emit("stat",f,stat)}this.cache[f]=this.cache[f]||exists;cb.call(this,!!exists,exists===2)};Glob.prototype._readdir=function(f,cb){assert(this instanceof Glob);var abs=f;if(f.charAt(0)==="/"){abs=path.join(this.root,f)}else if(isAbsolute(f)){abs=f}else if(this.changedCwd){abs=path.resolve(this.cwd,f)}if(f.length>this.maxLength){var er=new Error("Path name too long");er.code="ENAMETOOLONG";er.path=f;return this._afterReaddir(f,abs,cb,er)}this.log("readdir",[this.cwd,f,abs]);if(this.cache.hasOwnProperty(f)){var c=this.cache[f];if(Array.isArray(c)){if(this.sync)return cb.call(this,null,c);return process.nextTick(cb.bind(this,null,c))}if(!c||c===1){var code=c?"ENOTDIR":"ENOENT",er=new Error((c?"Not a directory":"Not found")+": "+f);er.path=f;er.code=code;this.log(f,er);if(this.sync)return cb.call(this,er);return process.nextTick(cb.bind(this,er))}}if(this.sync){var er,entries;try{entries=fs.readdirSync(abs)}catch(e){er=e}return this._afterReaddir(f,abs,cb,er,entries)}fs.readdir(abs,this._afterReaddir.bind(this,f,abs,cb))};Glob.prototype._afterReaddir=function(f,abs,cb,er,entries){assert(this instanceof Glob);if(entries&&!er){this.cache[f]=entries;if(!this.mark&&!this.stat){entries.forEach(function(e){if(f==="/")e=f+e;else e=f+"/"+e;this.cache[e]=true},this)}return cb.call(this,er,entries)}if(er)switch(er.code){case"ENOTDIR":this.cache[f]=1;return cb.call(this,er);case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[f]=false;return cb.call(this,er);default:this.cache[f]=false;if(this.strict)this.emit("error",er);if(!this.silent)console.error("glob error",er);return cb.call(this,er)}};var isAbsolute=process.platform==="win32"?absWin:absUnix;function absWin(p){if(absUnix(p))return true;var splitDeviceRe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,result=splitDeviceRe.exec(p),device=result[1]||"",isUnc=device&&device.charAt(1)!==":",isAbsolute=!!result[2]||isUnc;return isAbsolute}function absUnix(p){return p.charAt(0)==="/"||p===""}provide("glob",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");(function(){var YamlParseException=function(message,parsedLine,snippet,parsedFile){this.rawMessage=message;this.parsedLine=parsedLine!==undefined?parsedLine:-1;this.snippet=snippet!==undefined?snippet:null;this.parsedFile=parsedFile!==undefined?parsedFile:null;this.updateRepr();this.message=message};YamlParseException.prototype={name:"YamlParseException",message:null,parsedFile:null,parsedLine:-1,snippet:null,rawMessage:null,isDefined:function(input){return input!=undefined&&input!=null},getSnippet:function(){return this.snippet},setSnippet:function(snippet){this.snippet=snippet;this.updateRepr()},getParsedFile:function(){return this.parsedFile},setParsedFile:function(parsedFile){this.parsedFile=parsedFile;this.updateRepr()},getParsedLine:function(){return this.parsedLine},setParsedLine:function(parsedLine){this.parsedLine=parsedLine;this.updateRepr()},updateRepr:function(){this.message=this.rawMessage;var dot=false;if("."===this.message.charAt(this.message.length-1)){this.message=this.message.substring(0,this.message.length-1);dot=true}if(null!==this.parsedFile){this.message+=" in "+JSON.stringify(this.parsedFile)}if(this.parsedLine>=0){this.message+=" at line "+this.parsedLine}if(this.snippet){this.message+=' (near "'+this.snippet+'")'}if(dot){this.message+="."}}};var YamlRunningUnderNode=false;var Yaml=function(){};Yaml.prototype={parseFile:function(file,callback){if(callback==null){var input=this.getFileContents(file);var ret=null;try{ret=this.parse(input)}catch(e){if(e instanceof YamlParseException){e.setParsedFile(file)}throw e}return ret}this.getFileContents(file,function(data){callback((new Yaml).parse(data))})},parse:function(input){var yaml=new YamlParser;return yaml.parse(input)},dump:function(array,inline,spaces){if(inline==null)inline=2;var yaml=new YamlDumper;if(spaces){yaml.numSpacesForIndentation=spaces}return yaml.dump(array,inline)},getXHR:function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject){var names=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(var i=0;i<4;i++){try{return new ActiveXObject(names[i])}catch(e){}}}return null},getFileContents:function(file,callback){if(YamlRunningUnderNode){var fs=require("fs");if(callback==null){var data=fs.readFileSync(file);if(data==null)return null;return""+data}else{fs.readFile(file,function(err,data){if(err)callback(null);else callback(data)})}}else{var request=this.getXHR();if(callback==null){request.open("GET",file,false);request.send(null);if(request.status==200||request.status==0)return request.responseText;return null}request.onreadystatechange=function(){if(request.readyState==4)if(request.status==200||request.status==0)callback(request.responseText);else callback(null)};request.open("GET",file,true);request.send(null)}}};var YAML={stringify:function(input,inline,spaces){return(new Yaml).dump(input,inline,spaces)},parse:function(input){return(new Yaml).parse(input)},load:function(file,callback){return(new Yaml).parseFile(file,callback)}};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=YAML;YamlRunningUnderNode=true;(function(){var require_handler=function(module,filename){module.exports=YAML.load(filename)};if(undefined!==require.extensions){require.extensions[".yml"]=require_handler;require.extensions[".yaml"]=require_handler}})()}}if(typeof window!="undefined"){window.YAML=YAML}var YamlInline=function(){};YamlInline.prototype={i:null,parse:function(value){var result=null;value=this.trim(value);if(0==value.length){return""}switch(value.charAt(0)){case"[":result=this.parseSequence(value);break;case"{":result=this.parseMapping(value);break;default:result=this.parseScalar(value)}if(value.substr(this.i+1).replace(/^\s*#.*$/,"")!=""){console.log("oups "+value.substr(this.i+1));throw new YamlParseException('Unexpected characters near "'+value.substr(this.i)+'".')}return result},dump:function(value){if(undefined==value||null==value)return"null";if(value instanceof Date)return value.toISOString();if(typeof value=="object")return this.dumpObject(value);if(typeof value=="boolean")return value?"true":"false";if(/^\d+$/.test(value))return typeof value=="string"?"'"+value+"'":parseInt(value);if(this.isNumeric(value))return typeof value=="string"?"'"+value+"'":parseFloat(value);if(typeof value=="number")return value==Infinity?".Inf":value==-Infinity?"-.Inf":isNaN(value)?".NAN":value;var yaml=new YamlEscaper;if(yaml.requiresDoubleQuoting(value))return yaml.escapeWithDoubleQuotes(value);if(yaml.requiresSingleQuoting(value))return yaml.escapeWithSingleQuotes(value);if(""==value)return"";if(this.getTimestampRegex().test(value))return"'"+value+"'";if(this.inArray(value.toLowerCase(),["null","~","true","false"]))return"'"+value+"'";return value},dumpObject:function(value){var keys=this.getKeys(value);var output=null;var i;var len=keys.length;if(value instanceof Array){output=[];for(i=0;i<len;i++){output.push(this.dump(value[keys[i]]))}return"["+output.join(", ")+"]"}output=[];for(i=0;i<len;i++){output.push(this.dump(keys[i])+": "+this.dump(value[keys[i]]))}return"{ "+output.join(", ")+" }"},parseScalar:function(scalar,delimiters,stringDelimiters,i,evaluate){if(delimiters==undefined)delimiters=null;if(stringDelimiters==undefined)stringDelimiters=['"',"'"];if(i==undefined)i=0;if(evaluate==undefined)evaluate=true;var output=null;var pos=null;var matches=null;if(this.inArray(scalar[i],stringDelimiters)){output=this.parseQuotedScalar(scalar,i);i=this.i;if(null!==delimiters){var tmp=scalar.substr(i).replace(/^\s+/,"");if(!this.inArray(tmp.charAt(0),delimiters)){throw new YamlParseException("Unexpected characters ("+scalar.substr(i)+").")}}}else{if(!delimiters){output=(scalar+"").substring(i);i+=output.length;pos=output.indexOf(" #");if(pos!=-1){output=output.substr(0,pos).replace(/\s+$/g,"")}}else if(matches=new RegExp("^(.+?)("+delimiters.join("|")+")").exec((scalar+"").substring(i))){output=matches[1];i+=output.length}else{throw new YamlParseException("Malformed inline YAML string ("+scalar+").")}output=evaluate?this.evaluateScalar(output):output}this.i=i;return output},parseQuotedScalar:function(scalar,i){var matches=null;if(!(matches=new RegExp("^"+YamlInline.REGEX_QUOTED_STRING).exec((scalar+"").substring(i)))){throw new YamlParseException("Malformed inline YAML string ("+(scalar+"").substring(i)+").")}var output=matches[0].substr(1,matches[0].length-2);var unescaper=new YamlUnescaper;if('"'==(scalar+"").charAt(i)){output=unescaper.unescapeDoubleQuotedString(output)}else{output=unescaper.unescapeSingleQuotedString(output)}i+=matches[0].length;this.i=i;return output},parseSequence:function(sequence,i){if(i==undefined)i=0;var output=[];var len=sequence.length;i+=1;while(i<len){switch(sequence.charAt(i)){case"[":output.push(this.parseSequence(sequence,i));i=this.i;break;case"{":output.push(this.parseMapping(sequence,i));i=this.i;break;case"]":this.i=i;return output;case",":case" ":break;default:var isQuoted=this.inArray(sequence.charAt(i),['"',"'"]);var value=this.parseScalar(sequence,[",","]"],['"',"'"],i);i=this.i;if(!isQuoted&&(value+"").indexOf(": ")!=-1){try{value=this.parseMapping("{"+value+"}")}catch(e){if(!(e instanceof YamlParseException))throw e}}output.push(value);i--}i++}throw new YamlParseException('Malformed inline YAML string "'+sequence+'"')},parseMapping:function(mapping,i){if(i==undefined)i=0;var output={};var len=mapping.length;i+=1;var done=false;var doContinue=false;while(i<len){doContinue=false;switch(mapping.charAt(i)){case" ":case",":i++;doContinue=true;break;case"}":this.i=i;return output}if(doContinue)continue;var key=this.parseScalar(mapping,[":"," "],['"',"'"],i,false);i=this.i;done=false;while(i<len){switch(mapping.charAt(i)){case"[":output[key]=this.parseSequence(mapping,i);i=this.i;done=true;break;case"{":output[key]=this.parseMapping(mapping,i);i=this.i;done=true;break;case":":case" ":break;default:output[key]=this.parseScalar(mapping,[",","}"],['"',"'"],i);i=this.i;done=true;i--}++i;if(done){doContinue=true;break}}if(doContinue)continue}throw new YamlParseException('Malformed inline YAML string "'+mapping+'"')},evaluateScalar:function(scalar){scalar=this.trim(scalar);var raw=null;var cast=null;if("null"==scalar.toLowerCase()||""==scalar||"~"==scalar)return null;if((scalar+"").indexOf("!str ")==0)return(""+scalar).substring(5);if((scalar+"").indexOf("! ")==0)return parseInt(this.parseScalar((scalar+"").substr(2)));if(/^\d+$/.test(scalar)){raw=scalar;cast=parseInt(scalar);return"0"==scalar.charAt(0)?this.octdec(scalar):""+raw==""+cast?cast:raw}if("true"==(scalar+"").toLowerCase())return true;if("false"==(scalar+"").toLowerCase())return false;if(this.isNumeric(scalar))return"0x"==(scalar+"").substr(0,2)?this.hexdec(scalar):parseFloat(scalar);if(scalar.toLowerCase()==".inf")return Infinity;if(scalar.toLowerCase()==".nan")return NaN;if(scalar.toLowerCase()=="-.inf")return-Infinity;if(/^(-|\+)?[0-9,]+(\.[0-9]+)?$/.test(scalar))return parseFloat(scalar.split(",").join(""));if(this.getTimestampRegex().test(scalar))return new Date(this.strtotime(scalar));return""+scalar},getTimestampRegex:function(){return new RegExp("^"+"([0-9][0-9][0-9][0-9])"+"-([0-9][0-9]?)"+"-([0-9][0-9]?)"+"(?:(?:[Tt]|[ 	]+)"+"([0-9][0-9]?)"+":([0-9][0-9])"+":([0-9][0-9])"+"(?:.([0-9]*))?"+"(?:[ 	]*(Z|([-+])([0-9][0-9]?)"+"(?::([0-9][0-9]))?))?)?"+"$","gi")},trim:function(str){return(str+"").replace(/^\s+/,"").replace(/\s+$/,"")},isNumeric:function(input){return input-0==input&&input.length>0&&input.replace(/\s+/g,"")!=""},inArray:function(key,tab){var i;var len=tab.length;for(i=0;i<len;i++){if(key==tab[i])return true}return false},getKeys:function(tab){var ret=[];for(var name in tab){if(tab.hasOwnProperty(name)){ret.push(name)}}return ret},octdec:function(input){return parseInt((input+"").replace(/[^0-7]/gi,""),8)},hexdec:function(input){input=this.trim(input);if((input+"").substr(0,2)=="0x")input=(input+"").substring(2);return parseInt((input+"").replace(/[^a-f0-9]/gi,""),16)},strtotime:function(h,b){var f,c,g,k,d="";h=(h+"").replace(/\s{2,}|^\s|\s$/g," ").replace(/[\t\r\n]/g,"");if(h==="now"){return b===null||isNaN(b)?(new Date).getTime()||0:b||0}else{if(!isNaN(d=Date.parse(h))){return d||0}else{if(b){b=new Date(b)}else{b=new Date}}}h=h.toLowerCase();var e={day:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},mon:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]};var a=function(i){var o=i[2]&&i[2]==="ago";var n=(n=i[0]==="last"?-1:1)*(o?-1:1);switch(i[0]){case"last":case"next":switch(i[1].substring(0,3)){case"yea":b.setFullYear(b.getFullYear()+n);break;case"wee":b.setDate(b.getDate()+n*7);break;case"day":b.setDate(b.getDate()+n);break;case"hou":b.setHours(b.getHours()+n);break;case"min":b.setMinutes(b.getMinutes()+n);break;case"sec":b.setSeconds(b.getSeconds()+n);break;case"mon":if(i[1]==="month"){b.setMonth(b.getMonth()+n);break}default:var l=e.day[i[1].substring(0,3)];if(typeof l!=="undefined"){var p=l-b.getDay();if(p===0){p=7*n}else{if(p>0){if(i[0]==="last"){p-=7}}else{if(i[0]==="next"){p+=7}}}b.setDate(b.getDate()+p);b.setHours(0,0,0,0)}}break;default:if(/\d+/.test(i[0])){n*=parseInt(i[0],10);switch(i[1].substring(0,3)){case"yea":b.setFullYear(b.getFullYear()+n);break;case"mon":b.setMonth(b.getMonth()+n);break;case"wee":b.setDate(b.getDate()+n*7);break;case"day":b.setDate(b.getDate()+n);break;case"hou":b.setHours(b.getHours()+n);break;case"min":b.setMinutes(b.getMinutes()+n);break;case"sec":b.setSeconds(b.getSeconds()+n);break}}else{return false}break}return true};g=h.match(/^(\d{2,4}-\d{2}-\d{2})(?:\s(\d{1,2}:\d{2}(:\d{2})?)?(?:\.(\d+))?)?$/);if(g!==null){if(!g[2]){g[2]="00:00:00"}else{if(!g[3]){g[2]+=":00"}}k=g[1].split(/-/g);k[1]=e.mon[k[1]-1]||k[1];k[0]=+k[0];k[0]=k[0]>=0&&k[0]<=69?"20"+(k[0]<10?"0"+k[0]:k[0]+""):k[0]>=70&&k[0]<=99?"19"+k[0]:k[0]+"";return parseInt(this.strtotime(k[2]+" "+k[1]+" "+k[0]+" "+g[2])+(g[4]?g[4]:""),10)}var j="([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday)|(last|next)\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday))(\\sago)?";g=h.match(new RegExp(j,"gi"));if(g===null){return false}for(f=0,c=g.length;f<c;f++){if(!a(g[f].split(" "))){return false}}return b.getTime()||0}};YamlInline.REGEX_QUOTED_STRING="(?:\"(?:[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\"|'(?:[^']*(?:''[^']*)*)')";var YamlParser=function(offset){this.offset=offset!==undefined?offset:0};YamlParser.prototype={offset:0,lines:[],currentLineNb:-1,currentLine:"",refs:{},parse:function(value){this.currentLineNb=-1;this.currentLine="";this.lines=this.cleanup(value).split("\n");var data=null;var context=null;while(this.moveToNextLine()){if(this.isCurrentLineEmpty()){continue}if(this.currentLine.charAt(0)=="	"){throw new YamlParseException("A YAML file cannot contain tabs as indentation.",this.getRealCurrentLineNb()+1,this.currentLine)}var isRef=false;var isInPlace=false;var isProcessed=false;var values=null;var matches=null;var c=null;var parser=null;var block=null;var key=null;var parsed=null;var len=null;var reverse=null;if(values=/^\-((\s+)(.+?))?\s*$/.exec(this.currentLine)){if(context&&"mapping"==context){throw new YamlParseException("You cannot define a sequence item when in a mapping",this.getRealCurrentLineNb()+1,this.currentLine)}context="sequence";if(!this.isDefined(data))data=[];values={leadspaces:values[2],value:values[3]};if(this.isDefined(values.value)&&(matches=/^&([^ ]+) *(.*)/.exec(values.value))){matches={ref:matches[1],value:matches[2]};isRef=matches.ref;values.value=matches.value}if(!this.isDefined(values.value)||""==this.trim(values.value)||values.value.replace(/^ +/,"").charAt(0)=="#"){c=this.getRealCurrentLineNb()+1;parser=new YamlParser(c);parser.refs=this.refs;data.push(parser.parse(this.getNextEmbedBlock()));this.refs=parser.refs}else{if(this.isDefined(values.leadspaces)&&" "==values.leadspaces&&(matches=new RegExp("^("+YamlInline.REGEX_QUOTED_STRING+"|[^ '\"{[].*?) *:(\\s+(.+?))?\\s*$").exec(values.value))){matches={key:matches[1],value:matches[3]};c=this.getRealCurrentLineNb();parser=new YamlParser(c);parser.refs=this.refs;block=values.value;if(!this.isNextLineIndented()){block+="\n"+this.getNextEmbedBlock(this.getCurrentLineIndentation()+2)}data.push(parser.parse(block));this.refs=parser.refs}else{data.push(this.parseValue(values.value))}}}else if(values=new RegExp("^("+YamlInline.REGEX_QUOTED_STRING+"|[^ '\"[{].*?) *:(\\s+(.+?))?\\s*$").exec(this.currentLine)){if(!this.isDefined(data))data={};if(context&&"sequence"==context){throw new YamlParseException("You cannot define a mapping item when in a sequence",this.getRealCurrentLineNb()+1,this.currentLine)}context="mapping";values={key:values[1],value:values[3]};try{key=(new YamlInline).parseScalar(values.key)}catch(e){if(e instanceof YamlParseException){e.setParsedLine(this.getRealCurrentLineNb()+1);e.setSnippet(this.currentLine)}throw e}if("<<"==key){if(this.isDefined(values.value)&&"*"==(values.value+"").charAt(0)){isInPlace=values.value.substr(1);if(this.refs[isInPlace]==undefined){throw new YamlParseException('Reference "'+value+'" does not exist',this.getRealCurrentLineNb()+1,this.currentLine)}}else{if(this.isDefined(values.value)&&values.value!=""){value=values.value}else{value=this.getNextEmbedBlock()}c=this.getRealCurrentLineNb()+1;parser=new YamlParser(c);parser.refs=this.refs;parsed=parser.parse(value);this.refs=parser.refs;var merged=[];if(!this.isObject(parsed)){throw new YamlParseException("YAML merge keys used with a scalar value instead of an array",this.getRealCurrentLineNb()+1,this.currentLine)}else if(this.isDefined(parsed[0])){reverse=this.reverseArray(parsed);len=reverse.length;for(var i=0;i<len;i++){var parsedItem=reverse[i];if(!this.isObject(reverse[i])){throw new YamlParseException("Merge items must be arrays",this.getRealCurrentLineNb()+1,this.currentLine)}merged=this.mergeObject(reverse[i],merged)}}else{merged=this.mergeObject(merged,parsed)}isProcessed=merged}}else if(this.isDefined(values.value)&&(matches=/^&([^ ]+) *(.*)/.exec(values.value))){matches={ref:matches[1],value:matches[2]};isRef=matches.ref;values.value=matches.value}if(isProcessed){data=isProcessed}else if(!this.isDefined(values.value)||""==this.trim(values.value)||this.trim(values.value).charAt(0)=="#"){if(this.isNextLineIndented()&&!this.isNextLineUnIndentedCollection()){data[key]=null}else{c=this.getRealCurrentLineNb()+1;parser=new YamlParser(c);parser.refs=this.refs;data[key]=parser.parse(this.getNextEmbedBlock());this.refs=parser.refs}}else{if(isInPlace){data=this.refs[isInPlace]}else{data[key]=this.parseValue(values.value)}}}else{if(2==this.lines.length&&this.isEmpty(this.lines[1])){try{value=(new YamlInline).parse(this.lines[0])}catch(e){if(e instanceof YamlParseException){e.setParsedLine(this.getRealCurrentLineNb()+1);e.setSnippet(this.currentLine)}throw e}if(this.isObject(value)){var first=value[0];if(typeof value=="string"&&"*"==first.charAt(0)){data=[];len=value.length;for(var i=0;i<len;i++){data.push(this.refs[value[i].substr(1)])}value=data}}return value}throw new YamlParseException("Unable to parse.",this.getRealCurrentLineNb()+1,this.currentLine)}if(isRef){if(data instanceof Array)this.refs[isRef]=data[data.length-1];else{var lastKey=null;for(var k in data){if(data.hasOwnProperty(k))lastKey=k}this.refs[isRef]=data[k]}}}return this.isEmpty(data)?null:data},getRealCurrentLineNb:function(){return this.currentLineNb+this.offset},getCurrentLineIndentation:function(){return this.currentLine.length-this.currentLine.replace(/^ +/g,"").length},getNextEmbedBlock:function(indentation){this.moveToNextLine();var newIndent=null;var indent=null;if(!this.isDefined(indentation)){newIndent=this.getCurrentLineIndentation();var unindentedEmbedBlock=this.isStringUnIndentedCollectionItem(this.currentLine);if(!this.isCurrentLineEmpty()&&0==newIndent&&!unindentedEmbedBlock){throw new YamlParseException("Indentation problem A",this.getRealCurrentLineNb()+1,this.currentLine)}}else{newIndent=indentation}var data=[this.currentLine.substr(newIndent)];var isUnindentedCollection=this.isStringUnIndentedCollectionItem(this.currentLine);var continuationIndent=-1;if(isUnindentedCollection===true){continuationIndent=1+/^\-((\s+)(.+?))?\s*$/.exec(this.currentLine)[2].length}while(this.moveToNextLine()){if(isUnindentedCollection&&!this.isStringUnIndentedCollectionItem(this.currentLine)&&this.getCurrentLineIndentation()!=continuationIndent){this.moveToPreviousLine();break}if(this.isCurrentLineEmpty()){if(this.isCurrentLineBlank()){data.push(this.currentLine.substr(newIndent))}continue}indent=this.getCurrentLineIndentation();var matches;if(matches=/^( *)$/.exec(this.currentLine)){data.push(matches[1])}else if(indent>=newIndent){data.push(this.currentLine.substr(newIndent))}else if(0==indent){this.moveToPreviousLine();break}else{throw new YamlParseException("Indentation problem B",this.getRealCurrentLineNb()+1,this.currentLine)}}return data.join("\n")},moveToNextLine:function(){if(this.currentLineNb>=this.lines.length-1){return false}this.currentLineNb++;this.currentLine=this.lines[this.currentLineNb];return true},moveToPreviousLine:function(){this.currentLineNb--;this.currentLine=this.lines[this.currentLineNb]},parseValue:function(value){if("*"==(value+"").charAt(0)){if(this.trim(value).charAt(0)=="#"){value=(value+"").substr(1,value.indexOf("#")-2)}else{value=(value+"").substr(1)}if(this.refs[value]==undefined){throw new YamlParseException('Reference "'+value+'" does not exist',this.getRealCurrentLineNb()+1,this.currentLine)}return this.refs[value]}var matches=null;if(matches=/^(\||>)(\+|\-|\d+|\+\d+|\-\d+|\d+\+|\d+\-)?( +#.*)?$/.exec(value)){matches={separator:matches[1],modifiers:matches[2],comments:matches[3]};var modifiers=this.isDefined(matches.modifiers)?matches.modifiers:"";return this.parseFoldedScalar(matches.separator,modifiers.replace(/\d+/g,""),Math.abs(parseInt(modifiers)))}try{return(new YamlInline).parse(value)}catch(e){if(e instanceof YamlParseException){e.setParsedLine(this.getRealCurrentLineNb()+1);e.setSnippet(this.currentLine)}throw e}},parseFoldedScalar:function(separator,indicator,indentation){if(indicator==undefined)indicator="";if(indentation==undefined)indentation=0;separator="|"==separator?"\n":" ";var text="";var diff=null;var notEOF=this.moveToNextLine();while(notEOF&&this.isCurrentLineBlank()){text+="\n";notEOF=this.moveToNextLine()}if(!notEOF){return""}var matches=null;if(!(matches=new RegExp("^("+(indentation?this.strRepeat(" ",indentation):" +")+")(.*)$").exec(this.currentLine))){this.moveToPreviousLine();return""}matches={indent:matches[1],text:matches[2]};var textIndent=matches.indent;var previousIndent=0;text+=matches.text+separator;while(this.currentLineNb+1<this.lines.length){this.moveToNextLine();if(matches=new RegExp("^( {"+textIndent.length+",})(.+)$").exec(this.currentLine)){matches={indent:matches[1],text:matches[2]};if(" "==separator&&previousIndent!=matches.indent){text=text.substr(0,text.length-1)+"\n"}previousIndent=matches.indent;diff=matches.indent.length-textIndent.length;text+=this.strRepeat(" ",diff)+matches.text+(diff!=0?"\n":separator)}else if(matches=/^( *)$/.exec(this.currentLine)){text+=matches[1].replace(new RegExp("^ {1,"+textIndent.length+"}","g"),"")+"\n"}else{this.moveToPreviousLine();break}}if(" "==separator){text=text.replace(/ (\n*)$/g,"\n$1")}switch(indicator){case"":text=text.replace(/\n+$/g,"\n");break;case"+":break;case"-":text=text.replace(/\n+$/g,"");break}return text},isNextLineIndented:function(){var currentIndentation=this.getCurrentLineIndentation();var notEOF=this.moveToNextLine();while(notEOF&&this.isCurrentLineEmpty()){notEOF=this.moveToNextLine()}if(false==notEOF){return false}var ret=false;if(this.getCurrentLineIndentation()<=currentIndentation){ret=true}this.moveToPreviousLine();return ret},isCurrentLineEmpty:function(){return this.isCurrentLineBlank()||this.isCurrentLineComment()},isCurrentLineBlank:function(){return""==this.trim(this.currentLine)},isCurrentLineComment:function(){var ltrimmedLine=this.currentLine.replace(/^ +/g,"");return ltrimmedLine.charAt(0)=="#"},cleanup:function(value){value=value.split("\r\n").join("\n").split("\r").join("\n");if(!/\n$/.test(value)){value+="\n"}var count=0;var regex=/^\%YAML[: ][\d\.]+.*\n/;while(regex.test(value)){value=value.replace(regex,"");count++}this.offset+=count;regex=/^(#.*?\n)+/;if(regex.test(value)){var trimmedValue=value.replace(regex,"");this.offset+=this.subStrCount(value,"\n")-this.subStrCount(trimmedValue,"\n");value=trimmedValue}regex=/^\-\-\-.*?\n/;if(regex.test(value)){trimmedValue=value.replace(regex,"");this.offset+=this.subStrCount(value,"\n")-this.subStrCount(trimmedValue,"\n");value=trimmedValue;value=value.replace(/\.\.\.\s*$/g,"")}return value},isNextLineUnIndentedCollection:function(){var currentIndentation=this.getCurrentLineIndentation();var notEOF=this.moveToNextLine();while(notEOF&&this.isCurrentLineEmpty()){notEOF=this.moveToNextLine()}if(false===notEOF){return false}var ret=false;if(this.getCurrentLineIndentation()==currentIndentation&&this.isStringUnIndentedCollectionItem(this.currentLine)){ret=true}this.moveToPreviousLine();return ret},isStringUnIndentedCollectionItem:function(string){return 0===this.currentLine.indexOf("- ")},isObject:function(input){return typeof input=="object"&&this.isDefined(input)},isEmpty:function(input){return input==undefined||input==null||input==""||input==0||input=="0"||input==false},isDefined:function(input){return input!=undefined&&input!=null},reverseArray:function(input){var result=[];var len=input.length;for(var i=len-1;i>=0;i--){result.push(input[i])}return result},merge:function(a,b){var c={};var i;for(i in a){if(a.hasOwnProperty(i))if(/^\d+$/.test(i))c.push(a);else c[i]=a[i]}for(i in b){if(b.hasOwnProperty(i))if(/^\d+$/.test(i))c.push(b);else c[i]=b[i]}return c},strRepeat:function(str,count){var i;var result="";for(i=0;i<count;i++)result+=str;return result},subStrCount:function(string,subString,start,length){var c=0;string=""+string;subString=""+subString;if(start!=undefined)string=string.substr(start);if(length!=undefined)string=string.substr(0,length);var len=string.length;var sublen=subString.length;for(var i=0;i<len;i++){if(subString==string.substr(i,sublen))c++;i+=sublen-1}return c},trim:function(str){return(str+"").replace(/^ +/,"").replace(/ +$/,"")}};YamlEscaper=function(){};YamlEscaper.prototype={requiresDoubleQuoting:function(value){return new RegExp(YamlEscaper.REGEX_CHARACTER_TO_ESCAPE).test(value)},escapeWithDoubleQuotes:function(value){value=value+"";var len=YamlEscaper.escapees.length;var maxlen=YamlEscaper.escaped.length;var esc=YamlEscaper.escaped;for(var i=0;i<len;++i)if(i>=maxlen)esc.push("");var ret="";ret=value.replace(new RegExp(YamlEscaper.escapees.join("|"),"g"),function(str){for(var i=0;i<len;++i){if(str==YamlEscaper.escapees[i])return esc[i]}});return'"'+ret+'"'},requiresSingleQuoting:function(value){return/[\s'":{}[\],&*#?]|^[-?|<>=!%@`]/.test(value)},escapeWithSingleQuotes:function(value){return"'"+value.replace(/'/g,"''")+"'"}};YamlEscaper.REGEX_CHARACTER_TO_ESCAPE="[\\x00-\\x1f]|Â|Â |â¨|â©";YamlEscaper.escapees=["\\\\",'\\"','"',"\0","","","","","","","","\b","	","\n","","\f","\r","","","","","","","","","","","","","","","","","","","Â","Â ","â¨","â©"];YamlEscaper.escaped=['\\"',"\\\\",'\\"',"\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"];var YamlUnescaper=function(){};YamlUnescaper.prototype={unescapeSingleQuotedString:function(value){return value.replace(/''/g,"'")},unescapeDoubleQuotedString:function(value){var callback=function(m){return(new YamlUnescaper).unescapeCharacter(m)};return value.replace(new RegExp(YamlUnescaper.REGEX_ESCAPED_CHARACTER,"g"),callback)
},unescapeCharacter:function(value){switch(value.charAt(1)){case"0":return String.fromCharCode(0);case"a":return String.fromCharCode(7);case"b":return String.fromCharCode(8);case"t":return"	";case"	":return"	";case"n":return"\n";case"v":return String.fromCharCode(11);case"f":return String.fromCharCode(12);case"r":return String.fromCharCode(13);case"e":return"";case" ":return" ";case'"':return'"';case"/":return"/";case"\\":return"\\";case"N":return"\0";case"_":return"\0 ";case"L":return" (";case"P":return" )";case"x":return this.pack("n",(new YamlInline).hexdec(value.substr(2,2)));case"u":return this.pack("n",(new YamlInline).hexdec(value.substr(2,4)));case"U":return this.pack("N",(new YamlInline).hexdec(value.substr(2,8)))}},pack:function(B){var g=0,o=1,m="",l="",z=0,p=[],E,s,C,I,h,c;var d,b,x,H,u,e,A,q,D,t,w,a,G,F,y,v,f;while(g<B.length){E=B.charAt(g);s="";g++;while(g<B.length&&B.charAt(g).match(/[\d\*]/)!==null){s+=B.charAt(g);g++}if(s===""){s="1"}switch(E){case"n":if(s==="*"){s=arguments.length-o}if(s>arguments.length-o){throw new Error("Warning:  pack() Type "+E+": too few arguments")}for(z=0;z<s;z++){m+=String.fromCharCode(arguments[o]>>8&255);m+=String.fromCharCode(arguments[o]&255);o++}break;case"N":if(s==="*"){s=arguments.length-o}if(s>arguments.length-o){throw new Error("Warning:  pack() Type "+E+": too few arguments")}for(z=0;z<s;z++){m+=String.fromCharCode(arguments[o]>>24&255);m+=String.fromCharCode(arguments[o]>>16&255);m+=String.fromCharCode(arguments[o]>>8&255);m+=String.fromCharCode(arguments[o]&255);o++}break;default:throw new Error("Warning:  pack() Type "+E+": unknown format code")}}if(o<arguments.length){throw new Error("Warning: pack(): "+(arguments.length-o)+" arguments unused")}return m}};YamlUnescaper.REGEX_ESCAPED_CHARACTER='\\\\([0abt	nvfre "\\/\\\\N_LP]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})';var YamlDumper=function(){};YamlDumper.prototype={dump:function(input,inline,indent){if(inline==null)inline=0;if(indent==null)indent=0;var output="";var prefix=indent?this.strRepeat(" ",indent):"";var yaml;if(!this.numSpacesForIndentation)this.numSpacesForIndentation=2;if(inline<=0||!this.isObject(input)||this.isEmpty(input)){yaml=new YamlInline;output+=prefix+yaml.dump(input)}else{var isAHash=!this.arrayEquals(this.getKeys(input),this.range(0,input.length-1));var willBeInlined;for(var key in input){if(input.hasOwnProperty(key)){willBeInlined=inline-1<=0||!this.isObject(input[key])||this.isEmpty(input[key]);if(isAHash)yaml=new YamlInline;output+=prefix+""+(isAHash?yaml.dump(key)+":":"-")+""+(willBeInlined?" ":"\n")+""+this.dump(input[key],inline-1,willBeInlined?0:indent+this.numSpacesForIndentation)+""+(willBeInlined?"\n":"")}}}return output},strRepeat:function(str,count){var i;var result="";for(i=0;i<count;i++)result+=str;return result},isObject:function(input){return this.isDefined(input)&&typeof input=="object"},isEmpty:function(input){var ret=input==undefined||input==null||input==""||input==0||input=="0"||input==false;if(!ret&&typeof input=="object"&&!(input instanceof Array)){var propCount=0;for(var key in input)if(input.hasOwnProperty(key))propCount++;ret=!propCount}return ret},isDefined:function(input){return input!=undefined&&input!=null},getKeys:function(tab){var ret=[];for(var name in tab){if(tab.hasOwnProperty(name)){ret.push(name)}}return ret},range:function(start,end){if(start>end)return[];var ret=[];for(var i=start;i<=end;i++){ret.push(i)}return ret},arrayEquals:function(a,b){if(a.length!=b.length)return false;var len=a.length;for(var i=0;i<len;i++){if(a[i]!=b[i])return false}return true}}})();provide("yamljs",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");var process=process||{};(function(){"use strict";var isWindows=process.platform==="win32";function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length;i>=0;i--){var last=parts[i];if(last=="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}if(isWindows){var splitPathRe=/^(.+(?:[\\\/](?!$)|:)|[\\\/])?((?:.+?)?(\.[^.]*)?)$/;var splitDeviceRe=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?([\\\/])?(.*?)$/;exports.resolve=function(){var resolvedDevice="",resolvedTail="",resolvedAbsolute=false;for(var i=arguments.length;i>=-1;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"||!path){continue}var result=splitDeviceRe.exec(path),device=result[1]||"",isUnc=device&&device.charAt(1)!==":",isAbsolute=!!result[2]||isUnc,tail=result[3];if(device&&resolvedDevice&&device.toLowerCase()!==resolvedDevice.toLowerCase()){continue}if(!resolvedDevice){resolvedDevice=device}if(!resolvedAbsolute){resolvedTail=tail+"\\"+resolvedTail;resolvedAbsolute=isAbsolute}if(resolvedDevice&&resolvedAbsolute){break}}if(!resolvedAbsolute&&resolvedDevice){var deviceCwd="";resolvedTail=deviceCwd+"\\"+resolvedTail;resolvedAbsolute=true}resolvedDevice=resolvedDevice.replace(/\//g,"\\");function f(p){return!!p}resolvedTail=normalizeArray(resolvedTail.split(/[\\\/]+/).filter(f),!resolvedAbsolute).join("\\");return resolvedDevice+(resolvedAbsolute?"\\":"")+resolvedTail||"."};exports.normalize=function(path){var result=splitDeviceRe.exec(path),device=result[1]||"",isUnc=device&&device.charAt(1)!==":",isAbsolute=!!result[2]||isUnc,tail=result[3],trailingSlash=/[\\\/]$/.test(tail);tail=normalizeArray(tail.split(/[\\\/]+/).filter(function(p){return!!p}),!isAbsolute).join("\\");if(!tail&&!isAbsolute){tail="."}if(tail&&trailingSlash){tail+="\\"}return device+(isAbsolute?"\\":"")+tail};exports.join=function(){function f(p){return p&&typeof p==="string"}var paths=Array.prototype.slice.call(arguments,0).filter(f);var joined=paths.join("\\");if(/^[\\\/]{2}/.test(joined)&&!/^[\\\/]{2}/.test(paths[0])){joined=joined.slice(1)}return exports.normalize(joined)}}else{var splitPathRe=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"||!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(resolvedPath.split("/").filter(function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=path.charAt(0)==="/",trailingSlash=path.slice(-1)==="/";path=normalizeArray(path.split("/").filter(function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(paths.filter(function(p,index){return p&&typeof p==="string"}).join("/"))}}exports.dirname=function(path){var dir=splitPathRe.exec(path)[1]||"";if(!dir){return"."}else if(dir.length===1||isWindows&&dir.length<=3&&dir.charAt(1)===":"){return dir}else{return dir.substring(0,dir.length-1)}};exports.basename=function(path,ext){var f=splitPathRe.exec(path)[2]||"";if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){return splitPathRe.exec(path)[3]||""};exports.exists=function(path,callback){process.binding("fs").stat(path,function(err,stats){if(callback)callback(err?false:true)})};exports.existsSync=function(path){try{process.binding("fs").stat(path);return true}catch(e){return false}}})();provide("path",module.exports);$.ender(module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");(function(){var YamlParseException=function(message,parsedLine,snippet,parsedFile){this.rawMessage=message;this.parsedLine=parsedLine!==undefined?parsedLine:-1;this.snippet=snippet!==undefined?snippet:null;this.parsedFile=parsedFile!==undefined?parsedFile:null;this.updateRepr();this.message=message};YamlParseException.prototype={name:"YamlParseException",message:null,parsedFile:null,parsedLine:-1,snippet:null,rawMessage:null,isDefined:function(input){return input!=undefined&&input!=null},getSnippet:function(){return this.snippet},setSnippet:function(snippet){this.snippet=snippet;this.updateRepr()},getParsedFile:function(){return this.parsedFile},setParsedFile:function(parsedFile){this.parsedFile=parsedFile;this.updateRepr()},getParsedLine:function(){return this.parsedLine},setParsedLine:function(parsedLine){this.parsedLine=parsedLine;this.updateRepr()},updateRepr:function(){this.message=this.rawMessage;var dot=false;if("."===this.message.charAt(this.message.length-1)){this.message=this.message.substring(0,this.message.length-1);dot=true}if(null!==this.parsedFile){this.message+=" in "+JSON.stringify(this.parsedFile)}if(this.parsedLine>=0){this.message+=" at line "+this.parsedLine}if(this.snippet){this.message+=' (near "'+this.snippet+'")'}if(dot){this.message+="."}}};var YamlRunningUnderNode=false;var Yaml=function(){};Yaml.prototype={parseFile:function(file,callback){if(callback==null){var input=this.getFileContents(file);var ret=null;try{ret=this.parse(input)}catch(e){if(e instanceof YamlParseException){e.setParsedFile(file)}throw e}return ret}this.getFileContents(file,function(data){callback((new Yaml).parse(data))})},parse:function(input){var yaml=new YamlParser;return yaml.parse(input)},dump:function(array,inline,spaces){if(inline==null)inline=2;var yaml=new YamlDumper;if(spaces){yaml.numSpacesForIndentation=spaces}return yaml.dump(array,inline)},getXHR:function(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject){var names=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"];for(var i=0;i<4;i++){try{return new ActiveXObject(names[i])}catch(e){}}}return null},getFileContents:function(file,callback){if(YamlRunningUnderNode){var fs=require("fs");if(callback==null){var data=fs.readFileSync(file);if(data==null)return null;return""+data}else{fs.readFile(file,function(err,data){if(err)callback(null);else callback(data)})}}else{var request=this.getXHR();if(callback==null){request.open("GET",file,false);request.send(null);if(request.status==200||request.status==0)return request.responseText;return null}request.onreadystatechange=function(){if(request.readyState==4)if(request.status==200||request.status==0)callback(request.responseText);else callback(null)};request.open("GET",file,true);request.send(null)}}};var YAML={stringify:function(input,inline,spaces){return(new Yaml).dump(input,inline,spaces)},parse:function(input){return(new Yaml).parse(input)},load:function(file,callback){return(new Yaml).parseFile(file,callback)}};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports&&process&&process.versions&&process.versions.node){exports=module.exports=YAML;YamlRunningUnderNode=true;(function(){var require_handler=function(module,filename){module.exports=YAML.load(filename)};if(undefined!==require.extensions){require.extensions[".yml"]=require_handler;require.extensions[".yaml"]=require_handler}})()}}if(typeof window!="undefined"){window.YAML=YAML}var YamlInline=function(){};YamlInline.prototype={i:null,parse:function(value){var result=null;value=this.trim(value);if(0==value.length){return""}switch(value.charAt(0)){case"[":result=this.parseSequence(value);break;case"{":result=this.parseMapping(value);break;default:result=this.parseScalar(value)}if(value.substr(this.i+1).replace(/^\s*#.*$/,"")!=""){console.log("oups "+value.substr(this.i+1));throw new YamlParseException('Unexpected characters near "'+value.substr(this.i)+'".')}return result},dump:function(value){if(undefined==value||null==value)return"null";if(value instanceof Date)return value.toISOString();if(typeof value=="object")return this.dumpObject(value);if(typeof value=="boolean")return value?"true":"false";if(/^\d+$/.test(value))return typeof value=="string"?"'"+value+"'":parseInt(value);if(this.isNumeric(value))return typeof value=="string"?"'"+value+"'":parseFloat(value);if(typeof value=="number")return value==Infinity?".Inf":value==-Infinity?"-.Inf":isNaN(value)?".NAN":value;var yaml=new YamlEscaper;if(yaml.requiresDoubleQuoting(value))return yaml.escapeWithDoubleQuotes(value);if(yaml.requiresSingleQuoting(value))return yaml.escapeWithSingleQuotes(value);if(""==value)return"";if(this.getTimestampRegex().test(value))return"'"+value+"'";if(this.inArray(value.toLowerCase(),["null","~","true","false"]))return"'"+value+"'";return value},dumpObject:function(value){var keys=this.getKeys(value);var output=null;var i;var len=keys.length;if(value instanceof Array){output=[];for(i=0;i<len;i++){output.push(this.dump(value[keys[i]]))}return"["+output.join(", ")+"]"}output=[];for(i=0;i<len;i++){output.push(this.dump(keys[i])+": "+this.dump(value[keys[i]]))}return"{ "+output.join(", ")+" }"},parseScalar:function(scalar,delimiters,stringDelimiters,i,evaluate){if(delimiters==undefined)delimiters=null;if(stringDelimiters==undefined)stringDelimiters=['"',"'"];if(i==undefined)i=0;if(evaluate==undefined)evaluate=true;var output=null;var pos=null;var matches=null;if(this.inArray(scalar[i],stringDelimiters)){output=this.parseQuotedScalar(scalar,i);i=this.i;if(null!==delimiters){var tmp=scalar.substr(i).replace(/^\s+/,"");if(!this.inArray(tmp.charAt(0),delimiters)){throw new YamlParseException("Unexpected characters ("+scalar.substr(i)+").")}}}else{if(!delimiters){output=(scalar+"").substring(i);i+=output.length;pos=output.indexOf(" #");if(pos!=-1){output=output.substr(0,pos).replace(/\s+$/g,"")}}else if(matches=new RegExp("^(.+?)("+delimiters.join("|")+")").exec((scalar+"").substring(i))){output=matches[1];i+=output.length}else{throw new YamlParseException("Malformed inline YAML string ("+scalar+").")}output=evaluate?this.evaluateScalar(output):output}this.i=i;return output},parseQuotedScalar:function(scalar,i){var matches=null;if(!(matches=new RegExp("^"+YamlInline.REGEX_QUOTED_STRING).exec((scalar+"").substring(i)))){throw new YamlParseException("Malformed inline YAML string ("+(scalar+"").substring(i)+").")}var output=matches[0].substr(1,matches[0].length-2);var unescaper=new YamlUnescaper;if('"'==(scalar+"").charAt(i)){output=unescaper.unescapeDoubleQuotedString(output)}else{output=unescaper.unescapeSingleQuotedString(output)}i+=matches[0].length;this.i=i;return output},parseSequence:function(sequence,i){if(i==undefined)i=0;var output=[];var len=sequence.length;i+=1;while(i<len){switch(sequence.charAt(i)){case"[":output.push(this.parseSequence(sequence,i));i=this.i;break;case"{":output.push(this.parseMapping(sequence,i));i=this.i;break;case"]":this.i=i;return output;case",":case" ":break;default:var isQuoted=this.inArray(sequence.charAt(i),['"',"'"]);var value=this.parseScalar(sequence,[",","]"],['"',"'"],i);i=this.i;if(!isQuoted&&(value+"").indexOf(": ")!=-1){try{value=this.parseMapping("{"+value+"}")}catch(e){if(!(e instanceof YamlParseException))throw e}}output.push(value);i--}i++}throw new YamlParseException('Malformed inline YAML string "'+sequence+'"')},parseMapping:function(mapping,i){if(i==undefined)i=0;var output={};var len=mapping.length;i+=1;var done=false;var doContinue=false;while(i<len){doContinue=false;switch(mapping.charAt(i)){case" ":case",":i++;doContinue=true;break;case"}":this.i=i;return output}if(doContinue)continue;var key=this.parseScalar(mapping,[":"," "],['"',"'"],i,false);i=this.i;done=false;while(i<len){switch(mapping.charAt(i)){case"[":output[key]=this.parseSequence(mapping,i);i=this.i;done=true;break;case"{":output[key]=this.parseMapping(mapping,i);i=this.i;done=true;break;case":":case" ":break;default:output[key]=this.parseScalar(mapping,[",","}"],['"',"'"],i);i=this.i;done=true;i--}++i;if(done){doContinue=true;break}}if(doContinue)continue}throw new YamlParseException('Malformed inline YAML string "'+mapping+'"')},evaluateScalar:function(scalar){scalar=this.trim(scalar);var raw=null;var cast=null;if("null"==scalar.toLowerCase()||""==scalar||"~"==scalar)return null;if((scalar+"").indexOf("!str ")==0)return(""+scalar).substring(5);if((scalar+"").indexOf("! ")==0)return parseInt(this.parseScalar((scalar+"").substr(2)));if(/^\d+$/.test(scalar)){raw=scalar;cast=parseInt(scalar);return"0"==scalar.charAt(0)?this.octdec(scalar):""+raw==""+cast?cast:raw}if("true"==(scalar+"").toLowerCase())return true;if("false"==(scalar+"").toLowerCase())return false;if(this.isNumeric(scalar))return"0x"==(scalar+"").substr(0,2)?this.hexdec(scalar):parseFloat(scalar);if(scalar.toLowerCase()==".inf")return Infinity;if(scalar.toLowerCase()==".nan")return NaN;if(scalar.toLowerCase()=="-.inf")return-Infinity;if(/^(-|\+)?[0-9,]+(\.[0-9]+)?$/.test(scalar))return parseFloat(scalar.split(",").join(""));if(this.getTimestampRegex().test(scalar))return new Date(this.strtotime(scalar));return""+scalar},getTimestampRegex:function(){return new RegExp("^"+"([0-9][0-9][0-9][0-9])"+"-([0-9][0-9]?)"+"-([0-9][0-9]?)"+"(?:(?:[Tt]|[ 	]+)"+"([0-9][0-9]?)"+":([0-9][0-9])"+":([0-9][0-9])"+"(?:.([0-9]*))?"+"(?:[ 	]*(Z|([-+])([0-9][0-9]?)"+"(?::([0-9][0-9]))?))?)?"+"$","gi")},trim:function(str){return(str+"").replace(/^\s+/,"").replace(/\s+$/,"")},isNumeric:function(input){return input-0==input&&input.length>0&&input.replace(/\s+/g,"")!=""},inArray:function(key,tab){var i;var len=tab.length;for(i=0;i<len;i++){if(key==tab[i])return true}return false},getKeys:function(tab){var ret=[];for(var name in tab){if(tab.hasOwnProperty(name)){ret.push(name)}}return ret},octdec:function(input){return parseInt((input+"").replace(/[^0-7]/gi,""),8)},hexdec:function(input){input=this.trim(input);if((input+"").substr(0,2)=="0x")input=(input+"").substring(2);return parseInt((input+"").replace(/[^a-f0-9]/gi,""),16)},strtotime:function(h,b){var f,c,g,k,d="";h=(h+"").replace(/\s{2,}|^\s|\s$/g," ").replace(/[\t\r\n]/g,"");if(h==="now"){return b===null||isNaN(b)?(new Date).getTime()||0:b||0}else{if(!isNaN(d=Date.parse(h))){return d||0}else{if(b){b=new Date(b)}else{b=new Date}}}h=h.toLowerCase();var e={day:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},mon:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]};var a=function(i){var o=i[2]&&i[2]==="ago";var n=(n=i[0]==="last"?-1:1)*(o?-1:1);switch(i[0]){case"last":case"next":switch(i[1].substring(0,3)){case"yea":b.setFullYear(b.getFullYear()+n);break;case"wee":b.setDate(b.getDate()+n*7);break;case"day":b.setDate(b.getDate()+n);break;case"hou":b.setHours(b.getHours()+n);break;case"min":b.setMinutes(b.getMinutes()+n);break;case"sec":b.setSeconds(b.getSeconds()+n);break;case"mon":if(i[1]==="month"){b.setMonth(b.getMonth()+n);break}default:var l=e.day[i[1].substring(0,3)];if(typeof l!=="undefined"){var p=l-b.getDay();if(p===0){p=7*n}else{if(p>0){if(i[0]==="last"){p-=7}}else{if(i[0]==="next"){p+=7}}}b.setDate(b.getDate()+p);b.setHours(0,0,0,0)}}break;default:if(/\d+/.test(i[0])){n*=parseInt(i[0],10);switch(i[1].substring(0,3)){case"yea":b.setFullYear(b.getFullYear()+n);break;case"mon":b.setMonth(b.getMonth()+n);break;case"wee":b.setDate(b.getDate()+n*7);break;case"day":b.setDate(b.getDate()+n);break;case"hou":b.setHours(b.getHours()+n);break;case"min":b.setMinutes(b.getMinutes()+n);break;case"sec":b.setSeconds(b.getSeconds()+n);break}}else{return false}break}return true};g=h.match(/^(\d{2,4}-\d{2}-\d{2})(?:\s(\d{1,2}:\d{2}(:\d{2})?)?(?:\.(\d+))?)?$/);if(g!==null){if(!g[2]){g[2]="00:00:00"}else{if(!g[3]){g[2]+=":00"}}k=g[1].split(/-/g);k[1]=e.mon[k[1]-1]||k[1];k[0]=+k[0];k[0]=k[0]>=0&&k[0]<=69?"20"+(k[0]<10?"0"+k[0]:k[0]+""):k[0]>=70&&k[0]<=99?"19"+k[0]:k[0]+"";return parseInt(this.strtotime(k[2]+" "+k[1]+" "+k[0]+" "+g[2])+(g[4]?g[4]:""),10)}var j="([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday)|(last|next)\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday))(\\sago)?";g=h.match(new RegExp(j,"gi"));if(g===null){return false}for(f=0,c=g.length;f<c;f++){if(!a(g[f].split(" "))){return false}}return b.getTime()||0}};YamlInline.REGEX_QUOTED_STRING="(?:\"(?:[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\"|'(?:[^']*(?:''[^']*)*)')";var YamlParser=function(offset){this.offset=offset!==undefined?offset:0};YamlParser.prototype={offset:0,lines:[],currentLineNb:-1,currentLine:"",refs:{},parse:function(value){this.currentLineNb=-1;this.currentLine="";this.lines=this.cleanup(value).split("\n");var data=null;var context=null;while(this.moveToNextLine()){if(this.isCurrentLineEmpty()){continue}if(this.currentLine.charAt(0)=="	"){throw new YamlParseException("A YAML file cannot contain tabs as indentation.",this.getRealCurrentLineNb()+1,this.currentLine)}var isRef=false;var isInPlace=false;var isProcessed=false;var values=null;var matches=null;var c=null;var parser=null;var block=null;var key=null;var parsed=null;var len=null;var reverse=null;if(values=/^\-((\s+)(.+?))?\s*$/.exec(this.currentLine)){if(context&&"mapping"==context){throw new YamlParseException("You cannot define a sequence item when in a mapping",this.getRealCurrentLineNb()+1,this.currentLine)}context="sequence";if(!this.isDefined(data))data=[];values={leadspaces:values[2],value:values[3]};if(this.isDefined(values.value)&&(matches=/^&([^ ]+) *(.*)/.exec(values.value))){matches={ref:matches[1],value:matches[2]};isRef=matches.ref;values.value=matches.value}if(!this.isDefined(values.value)||""==this.trim(values.value)||values.value.replace(/^ +/,"").charAt(0)=="#"){c=this.getRealCurrentLineNb()+1;parser=new YamlParser(c);parser.refs=this.refs;data.push(parser.parse(this.getNextEmbedBlock()));this.refs=parser.refs}else{if(this.isDefined(values.leadspaces)&&" "==values.leadspaces&&(matches=new RegExp("^("+YamlInline.REGEX_QUOTED_STRING+"|[^ '\"{[].*?) *:(\\s+(.+?))?\\s*$").exec(values.value))){matches={key:matches[1],value:matches[3]};c=this.getRealCurrentLineNb();parser=new YamlParser(c);parser.refs=this.refs;block=values.value;if(!this.isNextLineIndented()){block+="\n"+this.getNextEmbedBlock(this.getCurrentLineIndentation()+2)}data.push(parser.parse(block));this.refs=parser.refs}else{data.push(this.parseValue(values.value))}}}else if(values=new RegExp("^("+YamlInline.REGEX_QUOTED_STRING+"|[^ '\"[{].*?) *:(\\s+(.+?))?\\s*$").exec(this.currentLine)){if(!this.isDefined(data))data={};if(context&&"sequence"==context){throw new YamlParseException("You cannot define a mapping item when in a sequence",this.getRealCurrentLineNb()+1,this.currentLine)}context="mapping";values={key:values[1],value:values[3]};try{key=(new YamlInline).parseScalar(values.key)}catch(e){if(e instanceof YamlParseException){e.setParsedLine(this.getRealCurrentLineNb()+1);e.setSnippet(this.currentLine)}throw e}if("<<"==key){if(this.isDefined(values.value)&&"*"==(values.value+"").charAt(0)){isInPlace=values.value.substr(1);if(this.refs[isInPlace]==undefined){throw new YamlParseException('Reference "'+value+'" does not exist',this.getRealCurrentLineNb()+1,this.currentLine)}}else{if(this.isDefined(values.value)&&values.value!=""){value=values.value}else{value=this.getNextEmbedBlock()}c=this.getRealCurrentLineNb()+1;parser=new YamlParser(c);parser.refs=this.refs;parsed=parser.parse(value);this.refs=parser.refs;var merged=[];if(!this.isObject(parsed)){throw new YamlParseException("YAML merge keys used with a scalar value instead of an array",this.getRealCurrentLineNb()+1,this.currentLine)}else if(this.isDefined(parsed[0])){reverse=this.reverseArray(parsed);len=reverse.length;for(var i=0;i<len;i++){var parsedItem=reverse[i];if(!this.isObject(reverse[i])){throw new YamlParseException("Merge items must be arrays",this.getRealCurrentLineNb()+1,this.currentLine)}merged=this.mergeObject(reverse[i],merged)}}else{merged=this.mergeObject(merged,parsed)}isProcessed=merged}}else if(this.isDefined(values.value)&&(matches=/^&([^ ]+) *(.*)/.exec(values.value))){matches={ref:matches[1],value:matches[2]};isRef=matches.ref;values.value=matches.value}if(isProcessed){data=isProcessed}else if(!this.isDefined(values.value)||""==this.trim(values.value)||this.trim(values.value).charAt(0)=="#"){if(this.isNextLineIndented()&&!this.isNextLineUnIndentedCollection()){data[key]=null}else{c=this.getRealCurrentLineNb()+1;parser=new YamlParser(c);parser.refs=this.refs;data[key]=parser.parse(this.getNextEmbedBlock());this.refs=parser.refs}}else{if(isInPlace){data=this.refs[isInPlace]}else{data[key]=this.parseValue(values.value)}}}else{if(2==this.lines.length&&this.isEmpty(this.lines[1])){try{value=(new YamlInline).parse(this.lines[0])}catch(e){if(e instanceof YamlParseException){e.setParsedLine(this.getRealCurrentLineNb()+1);e.setSnippet(this.currentLine)}throw e}if(this.isObject(value)){var first=value[0];if(typeof value=="string"&&"*"==first.charAt(0)){data=[];len=value.length;for(var i=0;i<len;i++){data.push(this.refs[value[i].substr(1)])}value=data}}return value}throw new YamlParseException("Unable to parse.",this.getRealCurrentLineNb()+1,this.currentLine)}if(isRef){if(data instanceof Array)this.refs[isRef]=data[data.length-1];else{var lastKey=null;for(var k in data){if(data.hasOwnProperty(k))lastKey=k}this.refs[isRef]=data[k]}}}return this.isEmpty(data)?null:data},getRealCurrentLineNb:function(){return this.currentLineNb+this.offset},getCurrentLineIndentation:function(){return this.currentLine.length-this.currentLine.replace(/^ +/g,"").length},getNextEmbedBlock:function(indentation){this.moveToNextLine();var newIndent=null;var indent=null;if(!this.isDefined(indentation)){newIndent=this.getCurrentLineIndentation();var unindentedEmbedBlock=this.isStringUnIndentedCollectionItem(this.currentLine);if(!this.isCurrentLineEmpty()&&0==newIndent&&!unindentedEmbedBlock){throw new YamlParseException("Indentation problem A",this.getRealCurrentLineNb()+1,this.currentLine)}}else{newIndent=indentation}var data=[this.currentLine.substr(newIndent)];var isUnindentedCollection=this.isStringUnIndentedCollectionItem(this.currentLine);var continuationIndent=-1;if(isUnindentedCollection===true){continuationIndent=1+/^\-((\s+)(.+?))?\s*$/.exec(this.currentLine)[2].length}while(this.moveToNextLine()){if(isUnindentedCollection&&!this.isStringUnIndentedCollectionItem(this.currentLine)&&this.getCurrentLineIndentation()!=continuationIndent){this.moveToPreviousLine();break}if(this.isCurrentLineEmpty()){if(this.isCurrentLineBlank()){data.push(this.currentLine.substr(newIndent))}continue}indent=this.getCurrentLineIndentation();var matches;if(matches=/^( *)$/.exec(this.currentLine)){data.push(matches[1])}else if(indent>=newIndent){data.push(this.currentLine.substr(newIndent))}else if(0==indent){this.moveToPreviousLine();break}else{throw new YamlParseException("Indentation problem B",this.getRealCurrentLineNb()+1,this.currentLine)}}return data.join("\n")},moveToNextLine:function(){if(this.currentLineNb>=this.lines.length-1){return false}this.currentLineNb++;this.currentLine=this.lines[this.currentLineNb];return true},moveToPreviousLine:function(){this.currentLineNb--;this.currentLine=this.lines[this.currentLineNb]},parseValue:function(value){if("*"==(value+"").charAt(0)){if(this.trim(value).charAt(0)=="#"){value=(value+"").substr(1,value.indexOf("#")-2)}else{value=(value+"").substr(1)}if(this.refs[value]==undefined){throw new YamlParseException('Reference "'+value+'" does not exist',this.getRealCurrentLineNb()+1,this.currentLine)}return this.refs[value]}var matches=null;if(matches=/^(\||>)(\+|\-|\d+|\+\d+|\-\d+|\d+\+|\d+\-)?( +#.*)?$/.exec(value)){matches={separator:matches[1],modifiers:matches[2],comments:matches[3]};var modifiers=this.isDefined(matches.modifiers)?matches.modifiers:"";return this.parseFoldedScalar(matches.separator,modifiers.replace(/\d+/g,""),Math.abs(parseInt(modifiers)))}try{return(new YamlInline).parse(value)}catch(e){if(e instanceof YamlParseException){e.setParsedLine(this.getRealCurrentLineNb()+1);e.setSnippet(this.currentLine)}throw e}},parseFoldedScalar:function(separator,indicator,indentation){if(indicator==undefined)indicator="";if(indentation==undefined)indentation=0;separator="|"==separator?"\n":" ";var text="";var diff=null;var notEOF=this.moveToNextLine();while(notEOF&&this.isCurrentLineBlank()){text+="\n";notEOF=this.moveToNextLine()}if(!notEOF){return""}var matches=null;if(!(matches=new RegExp("^("+(indentation?this.strRepeat(" ",indentation):" +")+")(.*)$").exec(this.currentLine))){this.moveToPreviousLine();return""}matches={indent:matches[1],text:matches[2]};var textIndent=matches.indent;var previousIndent=0;text+=matches.text+separator;while(this.currentLineNb+1<this.lines.length){this.moveToNextLine();if(matches=new RegExp("^( {"+textIndent.length+",})(.+)$").exec(this.currentLine)){matches={indent:matches[1],text:matches[2]};if(" "==separator&&previousIndent!=matches.indent){text=text.substr(0,text.length-1)+"\n"}previousIndent=matches.indent;diff=matches.indent.length-textIndent.length;text+=this.strRepeat(" ",diff)+matches.text+(diff!=0?"\n":separator)}else if(matches=/^( *)$/.exec(this.currentLine)){text+=matches[1].replace(new RegExp("^ {1,"+textIndent.length+"}","g"),"")+"\n"}else{this.moveToPreviousLine();break}}if(" "==separator){text=text.replace(/ (\n*)$/g,"\n$1")}switch(indicator){case"":text=text.replace(/\n+$/g,"\n");break;case"+":break;case"-":text=text.replace(/\n+$/g,"");break}return text},isNextLineIndented:function(){var currentIndentation=this.getCurrentLineIndentation();var notEOF=this.moveToNextLine();while(notEOF&&this.isCurrentLineEmpty()){notEOF=this.moveToNextLine()}if(false==notEOF){return false}var ret=false;if(this.getCurrentLineIndentation()<=currentIndentation){ret=true}this.moveToPreviousLine();return ret},isCurrentLineEmpty:function(){return this.isCurrentLineBlank()||this.isCurrentLineComment()},isCurrentLineBlank:function(){return""==this.trim(this.currentLine)},isCurrentLineComment:function(){var ltrimmedLine=this.currentLine.replace(/^ +/g,"");return ltrimmedLine.charAt(0)=="#"},cleanup:function(value){value=value.split("\r\n").join("\n").split("\r").join("\n");if(!/\n$/.test(value)){value+="\n"}var count=0;var regex=/^\%YAML[: ][\d\.]+.*\n/;while(regex.test(value)){value=value.replace(regex,"");count++}this.offset+=count;regex=/^(#.*?\n)+/;if(regex.test(value)){var trimmedValue=value.replace(regex,"");this.offset+=this.subStrCount(value,"\n")-this.subStrCount(trimmedValue,"\n");value=trimmedValue}regex=/^\-\-\-.*?\n/;if(regex.test(value)){trimmedValue=value.replace(regex,"");this.offset+=this.subStrCount(value,"\n")-this.subStrCount(trimmedValue,"\n");value=trimmedValue;value=value.replace(/\.\.\.\s*$/g,"")}return value},isNextLineUnIndentedCollection:function(){var currentIndentation=this.getCurrentLineIndentation();var notEOF=this.moveToNextLine();while(notEOF&&this.isCurrentLineEmpty()){notEOF=this.moveToNextLine()}if(false===notEOF){return false}var ret=false;if(this.getCurrentLineIndentation()==currentIndentation&&this.isStringUnIndentedCollectionItem(this.currentLine)){ret=true}this.moveToPreviousLine();return ret},isStringUnIndentedCollectionItem:function(string){return 0===this.currentLine.indexOf("- ")},isObject:function(input){return typeof input=="object"&&this.isDefined(input)},isEmpty:function(input){return input==undefined||input==null||input==""||input==0||input=="0"||input==false},isDefined:function(input){return input!=undefined&&input!=null},reverseArray:function(input){var result=[];var len=input.length;for(var i=len-1;i>=0;i--){result.push(input[i])}return result},merge:function(a,b){var c={};var i;for(i in a){if(a.hasOwnProperty(i))if(/^\d+$/.test(i))c.push(a);else c[i]=a[i]}for(i in b){if(b.hasOwnProperty(i))if(/^\d+$/.test(i))c.push(b);else c[i]=b[i]}return c},strRepeat:function(str,count){var i;var result="";for(i=0;i<count;i++)result+=str;return result},subStrCount:function(string,subString,start,length){var c=0;
string=""+string;subString=""+subString;if(start!=undefined)string=string.substr(start);if(length!=undefined)string=string.substr(0,length);var len=string.length;var sublen=subString.length;for(var i=0;i<len;i++){if(subString==string.substr(i,sublen))c++;i+=sublen-1}return c},trim:function(str){return(str+"").replace(/^ +/,"").replace(/ +$/,"")}};YamlEscaper=function(){};YamlEscaper.prototype={requiresDoubleQuoting:function(value){return new RegExp(YamlEscaper.REGEX_CHARACTER_TO_ESCAPE).test(value)},escapeWithDoubleQuotes:function(value){value=value+"";var len=YamlEscaper.escapees.length;var maxlen=YamlEscaper.escaped.length;var esc=YamlEscaper.escaped;for(var i=0;i<len;++i)if(i>=maxlen)esc.push("");var ret="";ret=value.replace(new RegExp(YamlEscaper.escapees.join("|"),"g"),function(str){for(var i=0;i<len;++i){if(str==YamlEscaper.escapees[i])return esc[i]}});return'"'+ret+'"'},requiresSingleQuoting:function(value){return/[\s'":{}[\],&*#?]|^[-?|<>=!%@`]/.test(value)},escapeWithSingleQuotes:function(value){return"'"+value.replace(/'/g,"''")+"'"}};YamlEscaper.REGEX_CHARACTER_TO_ESCAPE="[\\x00-\\x1f]|Â|Â |â¨|â©";YamlEscaper.escapees=["\\\\",'\\"','"',"\0","","","","","","","","\b","	","\n","","\f","\r","","","","","","","","","","","","","","","","","","","Â","Â ","â¨","â©"];YamlEscaper.escaped=['\\"',"\\\\",'\\"',"\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"];var YamlUnescaper=function(){};YamlUnescaper.prototype={unescapeSingleQuotedString:function(value){return value.replace(/''/g,"'")},unescapeDoubleQuotedString:function(value){var callback=function(m){return(new YamlUnescaper).unescapeCharacter(m)};return value.replace(new RegExp(YamlUnescaper.REGEX_ESCAPED_CHARACTER,"g"),callback)},unescapeCharacter:function(value){switch(value.charAt(1)){case"0":return String.fromCharCode(0);case"a":return String.fromCharCode(7);case"b":return String.fromCharCode(8);case"t":return"	";case"	":return"	";case"n":return"\n";case"v":return String.fromCharCode(11);case"f":return String.fromCharCode(12);case"r":return String.fromCharCode(13);case"e":return"";case" ":return" ";case'"':return'"';case"/":return"/";case"\\":return"\\";case"N":return"\0";case"_":return"\0 ";case"L":return" (";case"P":return" )";case"x":return this.pack("n",(new YamlInline).hexdec(value.substr(2,2)));case"u":return this.pack("n",(new YamlInline).hexdec(value.substr(2,4)));case"U":return this.pack("N",(new YamlInline).hexdec(value.substr(2,8)))}},pack:function(B){var g=0,o=1,m="",l="",z=0,p=[],E,s,C,I,h,c;var d,b,x,H,u,e,A,q,D,t,w,a,G,F,y,v,f;while(g<B.length){E=B.charAt(g);s="";g++;while(g<B.length&&B.charAt(g).match(/[\d\*]/)!==null){s+=B.charAt(g);g++}if(s===""){s="1"}switch(E){case"n":if(s==="*"){s=arguments.length-o}if(s>arguments.length-o){throw new Error("Warning:  pack() Type "+E+": too few arguments")}for(z=0;z<s;z++){m+=String.fromCharCode(arguments[o]>>8&255);m+=String.fromCharCode(arguments[o]&255);o++}break;case"N":if(s==="*"){s=arguments.length-o}if(s>arguments.length-o){throw new Error("Warning:  pack() Type "+E+": too few arguments")}for(z=0;z<s;z++){m+=String.fromCharCode(arguments[o]>>24&255);m+=String.fromCharCode(arguments[o]>>16&255);m+=String.fromCharCode(arguments[o]>>8&255);m+=String.fromCharCode(arguments[o]&255);o++}break;default:throw new Error("Warning:  pack() Type "+E+": unknown format code")}}if(o<arguments.length){throw new Error("Warning: pack(): "+(arguments.length-o)+" arguments unused")}return m}};YamlUnescaper.REGEX_ESCAPED_CHARACTER='\\\\([0abt	nvfre "\\/\\\\N_LP]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})';var YamlDumper=function(){};YamlDumper.prototype={dump:function(input,inline,indent){if(inline==null)inline=0;if(indent==null)indent=0;var output="";var prefix=indent?this.strRepeat(" ",indent):"";var yaml;if(!this.numSpacesForIndentation)this.numSpacesForIndentation=2;if(inline<=0||!this.isObject(input)||this.isEmpty(input)){yaml=new YamlInline;output+=prefix+yaml.dump(input)}else{var isAHash=!this.arrayEquals(this.getKeys(input),this.range(0,input.length-1));var willBeInlined;for(var key in input){if(input.hasOwnProperty(key)){willBeInlined=inline-1<=0||!this.isObject(input[key])||this.isEmpty(input[key]);if(isAHash)yaml=new YamlInline;output+=prefix+""+(isAHash?yaml.dump(key)+":":"-")+""+(willBeInlined?" ":"\n")+""+this.dump(input[key],inline-1,willBeInlined?0:indent+this.numSpacesForIndentation)+""+(willBeInlined?"\n":"")}}}return output},strRepeat:function(str,count){var i;var result="";for(i=0;i<count;i++)result+=str;return result},isObject:function(input){return this.isDefined(input)&&typeof input=="object"},isEmpty:function(input){var ret=input==undefined||input==null||input==""||input==0||input=="0"||input==false;if(!ret&&typeof input=="object"&&!(input instanceof Array)){var propCount=0;for(var key in input)if(input.hasOwnProperty(key))propCount++;ret=!propCount}return ret},isDefined:function(input){return input!=undefined&&input!=null},getKeys:function(tab){var ret=[];for(var name in tab){if(tab.hasOwnProperty(name)){ret.push(name)}}return ret},range:function(start,end){if(start>end)return[];var ret=[];for(var i=start;i<=end;i++){ret.push(i)}return ret},arrayEquals:function(a,b){if(a.length!=b.length)return false;var len=a.length;for(var i=0;i<len;i++){if(a[i]!=b[i])return false}return true}}})();provide("yamltojson.com/yamljs",module.exports)})(global);(function(context){var module={exports:{}},exports=module.exports,$=require("ender");jQuery(function(){"use strict";var YAML=require("yamltojson.com/yamljs"),$=require("jQuery"),$events=$("body");$events.on("click",".js-convert",function(){var yml=$(".js-yml").val(),data,json;try{data=YAML.parse(yml)}catch(e){$(".js-json").val(e.toString()+"\n\n"+"Go validate your YAML at http://yamllint.com to figure out where the error is.\nThen come back here and try again.");return}json=JSON.stringify(data,null,"  ");$(".js-json").val(json)})});provide("yamltojson.com",module.exports)})(global);